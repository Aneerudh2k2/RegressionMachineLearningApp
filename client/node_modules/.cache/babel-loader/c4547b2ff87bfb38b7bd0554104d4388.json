{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}(); // Internal Imports\n\n\nimport { Component } from \"../component\";\nimport { Roles, Events } from \"../../interfaces\";\nimport { Tools } from \"../../tools\"; // D3 Imports\n\nimport { select } from \"d3-selection\";\n\nvar Scatter =\n/** @class */\nfunction (_super) {\n  __extends(Scatter, _super);\n\n  function Scatter() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = \"scatter\";\n\n    _this.handleChartHolderOnHover = function (event) {\n      _this.parent.selectAll(\"circle.dot\").transition(_this.services.transitions.getTransition(\"chart-holder-hover-scatter\")).attr(\"opacity\", 1);\n    };\n\n    _this.handleChartHolderOnMouseOut = function (event) {\n      _this.parent.selectAll(\"circle.dot\").transition(_this.services.transitions.getTransition(\"chart-holder-mouseout-scatter\")).attr(\"opacity\", 0);\n    };\n\n    _this.handleLegendOnHover = function (event) {\n      var hoveredElement = event.detail.hoveredElement;\n\n      var groupMapsTo = _this.model.getOptions().data.groupMapsTo;\n\n      _this.parent.selectAll(\"circle.dot\").transition(_this.services.transitions.getTransition(\"legend-hover-scatter\")).attr(\"opacity\", function (d) {\n        return d[groupMapsTo] !== hoveredElement.datum()[\"name\"] ? 0.3 : 1;\n      });\n    };\n\n    _this.handleLegendMouseOut = function (event) {\n      _this.parent.selectAll(\"circle.dot\").transition(_this.services.transitions.getTransition(\"legend-mouseout-scatter\")).attr(\"opacity\", 1);\n    };\n\n    return _this;\n  }\n\n  Scatter.prototype.init = function () {\n    var events = this.services.events; // Highlight correct circle on legend item hovers\n\n    events.addEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover); // Un-highlight circles on legend item mouseouts\n\n    events.addEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n    var fadeInOnChartHolderMouseover = this.configs.fadeInOnChartHolderMouseover;\n\n    if (fadeInOnChartHolderMouseover) {\n      // Fade-in scatter circles\n      events.addEventListener(Events.Chart.MOUSEOVER, this.handleChartHolderOnHover); // Fade-out scatter circles\n\n      events.addEventListener(Events.Chart.MOUSEOUT, this.handleChartHolderOnMouseOut);\n    }\n  };\n\n  Scatter.prototype.render = function (animate) {\n    // Grab container SVG\n    var svg = this.getContainerSVG();\n    var options = this.model.getOptions();\n    var groupMapsTo = options.data.groupMapsTo;\n    var domainIdentifier = this.services.cartesianScales.getDomainIdentifier();\n    var rangeIdentifier = this.services.cartesianScales.getRangeIdentifier();\n    var stacked = this.configs.stacked;\n    var scatterData;\n\n    if (stacked) {\n      var percentage = Object.keys(options.axes).some(function (axis) {\n        return options.axes[axis].percentage;\n      });\n      scatterData = this.model.getStackedData({\n        percentage: percentage\n      });\n    } else {\n      scatterData = this.model.getDisplayData().filter(function (d) {\n        return d[rangeIdentifier] !== undefined && d[rangeIdentifier] !== null;\n      });\n    } // Update data on dot groups\n\n\n    var circles = svg.selectAll(\"circle.dot\").data(scatterData, function (datum) {\n      return datum[groupMapsTo] + \"-\" + datum[domainIdentifier];\n    }); // Remove circles that need to be removed\n\n    circles.exit().attr(\"opacity\", 0).remove(); // Add the dot groups that need to be introduced\n\n    var enteringCircles = circles.enter().append(\"circle\").classed(\"dot\", true).attr(\"opacity\", 0); // Apply styling & position\n\n    var circlesToStyle = enteringCircles.merge(circles);\n    this.styleCircles(circlesToStyle, animate); // Add event listeners to elements drawn\n\n    this.addEventListeners();\n  }; // A value is an anomaly if is above all defined domain and range thresholds\n\n\n  Scatter.prototype.isDatapointThresholdAnomaly = function (datum, index) {\n    var handleThresholds = this.configs.handleThresholds;\n\n    if (!handleThresholds) {\n      return false;\n    }\n\n    var cartesianScales = this.services.cartesianScales;\n    var orientation = cartesianScales.getOrientation(); // Get highest domain and range thresholds\n\n    var _a = Tools.flipDomainAndRangeBasedOnOrientation(this.services.cartesianScales.getHighestDomainThreshold(), this.services.cartesianScales.getHighestRangeThreshold(), orientation),\n        xThreshold = _a[0],\n        yThreshold = _a[1];\n\n    var _b = Tools.flipDomainAndRangeBasedOnOrientation(function (d, i) {\n      return cartesianScales.getDomainValue(d, i);\n    }, function (d, i) {\n      return cartesianScales.getRangeValue(d, i);\n    }, orientation),\n        getXValue = _b[0],\n        getYValue = _b[1]; // Get datum x and y values\n\n\n    var xValue = getXValue(datum, index);\n    var yValue = getYValue(datum, index); // To be an anomaly, the value has to be higher or equal than the threshold value\n    // (if are present, both range and domain threshold values)\n\n    if (yThreshold && xThreshold) {\n      return yValue <= yThreshold.scaleValue && xValue >= xThreshold.scaleValue;\n    }\n\n    if (yThreshold) {\n      return yValue <= yThreshold.scaleValue;\n    }\n\n    if (xThreshold) {\n      return xValue >= xThreshold.scaleValue;\n    }\n  };\n\n  Scatter.prototype.styleCircles = function (selection, animate) {\n    var _this = this; // Chart options mixed with the internal configurations\n\n\n    var options = this.model.getOptions();\n    var _a = options.points,\n        filled = _a.filled,\n        fillOpacity = _a.fillOpacity;\n    var _b = this.services,\n        cartesianScales = _b.cartesianScales,\n        transitions = _b.transitions;\n    var groupMapsTo = options.data.groupMapsTo;\n    var domainIdentifier = cartesianScales.getDomainIdentifier();\n    var rangeIdentifier = cartesianScales.getRangeIdentifier();\n\n    var getDomainValue = function (d, i) {\n      return cartesianScales.getDomainValue(d, i);\n    };\n\n    var getRangeValue = function (d, i) {\n      return cartesianScales.getRangeValue(d, i);\n    };\n\n    var _c = Tools.flipDomainAndRangeBasedOnOrientation(getDomainValue, getRangeValue, cartesianScales.getOrientation()),\n        getXValue = _c[0],\n        getYValue = _c[1];\n\n    var fadeInOnChartHolderMouseover = this.configs.fadeInOnChartHolderMouseover;\n    selection.raise().classed(\"dot\", true) // Set class to highlight the dots that are above all the thresholds, in both directions (vertical and horizontal)\n    .classed(\"threshold-anomaly\", function (d, i) {\n      return _this.isDatapointThresholdAnomaly(d, i);\n    }).classed(\"filled\", function (d) {\n      return _this.model.getIsFilled(d[groupMapsTo], d[domainIdentifier], d, filled);\n    }).classed(\"unfilled\", function (d) {\n      return !_this.model.getIsFilled(d[groupMapsTo], d[domainIdentifier], d, filled);\n    }).transition(transitions.getTransition(\"scatter-update-enter\", animate)).attr(\"cx\", getXValue).attr(\"cy\", getYValue).attr(\"r\", options.points.radius).attr(\"fill\", function (d) {\n      if (_this.model.getIsFilled(d[groupMapsTo], d[domainIdentifier], d, filled)) {\n        return _this.model.getFillColor(d[groupMapsTo], d[domainIdentifier], d);\n      }\n    }).attr(\"fill-opacity\", filled ? fillOpacity : 1).attr(\"stroke\", function (d) {\n      return _this.model.getStrokeColor(d[groupMapsTo], d[domainIdentifier], d);\n    }).attr(\"opacity\", fadeInOnChartHolderMouseover ? 0 : 1) // a11y\n    .attr(\"role\", Roles.GRAPHICS_SYMBOL).attr(\"aria-roledescription\", \"point\").attr(\"aria-label\", function (d) {\n      return d[rangeIdentifier];\n    }); // Add event listeners to elements drawn\n\n    this.addEventListeners();\n  };\n\n  Scatter.prototype.addEventListeners = function () {\n    var self = this;\n    var groupMapsTo = this.model.getOptions().data.groupMapsTo;\n    var domainIdentifier = this.services.cartesianScales.getDomainIdentifier();\n    this.parent.selectAll(\"circle\").on(\"mouseover\", function (datum) {\n      var hoveredElement = select(this);\n      hoveredElement.classed(\"hovered\", true).style(\"fill\", function (d) {\n        return self.model.getFillColor(d[groupMapsTo], d[domainIdentifier], d);\n      });\n      var hoveredX = self.services.cartesianScales.getDomainValue(datum);\n      var hoveredY = self.services.cartesianScales.getRangeValue(datum);\n      var overlappingData = self.model.getDisplayData().filter(function (d) {\n        return hoveredX === self.services.cartesianScales.getDomainValue(d) && hoveredY === self.services.cartesianScales.getRangeValue(d);\n      }); // Show tooltip\n\n      self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n        hoveredElement: hoveredElement,\n        data: overlappingData\n      }); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Scatter.SCATTER_MOUSEOVER, {\n        element: hoveredElement,\n        datum: datum\n      });\n    }).on(\"mousemove\", function (datum) {\n      var hoveredElement = select(this); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Scatter.SCATTER_MOUSEMOVE, {\n        element: hoveredElement,\n        datum: datum\n      });\n      self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n    }).on(\"click\", function (datum) {\n      // Dispatch mouse event\n      self.services.events.dispatchEvent(Events.Scatter.SCATTER_CLICK, {\n        element: select(this),\n        datum: datum\n      });\n    }).on(\"mouseout\", function (datum) {\n      var hoveredElement = select(this);\n      hoveredElement.classed(\"hovered\", false);\n\n      if (!self.configs.filled) {\n        hoveredElement.style(\"fill\", null);\n      } // Dispatch mouse event\n\n\n      self.services.events.dispatchEvent(Events.Scatter.SCATTER_MOUSEOUT, {\n        element: hoveredElement,\n        datum: datum\n      }); // Hide tooltip\n\n      self.services.events.dispatchEvent(Events.Tooltip.HIDE, {\n        hoveredElement: hoveredElement\n      });\n    });\n  };\n\n  Scatter.prototype.destroy = function () {\n    // Remove event listeners\n    this.parent.selectAll(\"circle\").on(\"mousemove\", null).on(\"mouseout\", null); // Remove legend listeners\n\n    var events = this.services.events;\n    events.removeEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n    events.removeEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n    events.removeEventListener(Events.Chart.MOUSEOVER, this.handleChartHolderOnHover);\n    events.removeEventListener(Events.Chart.MOUSEOUT, this.handleChartHolderOnMouseOut);\n  };\n\n  return Scatter;\n}(Component);\n\nexport { Scatter };","map":{"version":3,"sources":["/Users/nicholasrenotte/Desktop/Regression/app/client/node_modules/@carbon/charts/components/graphs/scatter.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Component","Roles","Events","Tools","select","Scatter","_super","_this","apply","arguments","type","handleChartHolderOnHover","event","parent","selectAll","transition","services","transitions","getTransition","attr","handleChartHolderOnMouseOut","handleLegendOnHover","hoveredElement","detail","groupMapsTo","model","getOptions","data","datum","handleLegendMouseOut","init","events","addEventListener","Legend","ITEM_HOVER","ITEM_MOUSEOUT","fadeInOnChartHolderMouseover","configs","Chart","MOUSEOVER","MOUSEOUT","render","animate","svg","getContainerSVG","options","domainIdentifier","cartesianScales","getDomainIdentifier","rangeIdentifier","getRangeIdentifier","stacked","scatterData","percentage","keys","axes","some","axis","getStackedData","getDisplayData","filter","undefined","circles","exit","remove","enteringCircles","enter","append","classed","circlesToStyle","merge","styleCircles","addEventListeners","isDatapointThresholdAnomaly","index","handleThresholds","orientation","getOrientation","_a","flipDomainAndRangeBasedOnOrientation","getHighestDomainThreshold","getHighestRangeThreshold","xThreshold","yThreshold","_b","i","getDomainValue","getRangeValue","getXValue","getYValue","xValue","yValue","scaleValue","selection","points","filled","fillOpacity","_c","raise","getIsFilled","radius","getFillColor","getStrokeColor","GRAPHICS_SYMBOL","self","on","style","hoveredX","hoveredY","overlappingData","dispatchEvent","Tooltip","SHOW","SCATTER_MOUSEOVER","element","SCATTER_MOUSEMOVE","MOVE","SCATTER_CLICK","SCATTER_MOUSEOUT","HIDE","destroy","removeEventListener"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C,C,CAaA;;;AACA,SAASI,SAAT,QAA0B,cAA1B;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,kBAA9B;AACA,SAASC,KAAT,QAAsB,aAAtB,C,CACA;;AACA,SAASC,MAAT,QAAuB,cAAvB;;AACA,IAAIC,OAAO;AAAG;AAAe,UAAUC,MAAV,EAAkB;AAC3CpB,EAAAA,SAAS,CAACmB,OAAD,EAAUC,MAAV,CAAT;;AACA,WAASD,OAAT,GAAmB;AACf,QAAIE,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACG,IAAN,GAAa,SAAb;;AACAH,IAAAA,KAAK,CAACI,wBAAN,GAAiC,UAAUC,KAAV,EAAiB;AAC9CL,MAAAA,KAAK,CAACM,MAAN,CACKC,SADL,CACe,YADf,EAEKC,UAFL,CAEgBR,KAAK,CAACS,QAAN,CAAeC,WAAf,CAA2BC,aAA3B,CAAyC,4BAAzC,CAFhB,EAGKC,IAHL,CAGU,SAHV,EAGqB,CAHrB;AAIH,KALD;;AAMAZ,IAAAA,KAAK,CAACa,2BAAN,GAAoC,UAAUR,KAAV,EAAiB;AACjDL,MAAAA,KAAK,CAACM,MAAN,CACKC,SADL,CACe,YADf,EAEKC,UAFL,CAEgBR,KAAK,CAACS,QAAN,CAAeC,WAAf,CAA2BC,aAA3B,CAAyC,+BAAzC,CAFhB,EAGKC,IAHL,CAGU,SAHV,EAGqB,CAHrB;AAIH,KALD;;AAMAZ,IAAAA,KAAK,CAACc,mBAAN,GAA4B,UAAUT,KAAV,EAAiB;AACzC,UAAIU,cAAc,GAAGV,KAAK,CAACW,MAAN,CAAaD,cAAlC;;AACA,UAAIE,WAAW,GAAGjB,KAAK,CAACkB,KAAN,CAAYC,UAAZ,GAAyBC,IAAzB,CAA8BH,WAAhD;;AACAjB,MAAAA,KAAK,CAACM,MAAN,CACKC,SADL,CACe,YADf,EAEKC,UAFL,CAEgBR,KAAK,CAACS,QAAN,CAAeC,WAAf,CAA2BC,aAA3B,CAAyC,sBAAzC,CAFhB,EAGKC,IAHL,CAGU,SAHV,EAGqB,UAAU/B,CAAV,EAAa;AAC9B,eAAOA,CAAC,CAACoC,WAAD,CAAD,KAAmBF,cAAc,CAACM,KAAf,GAAuB,MAAvB,CAAnB,GAAoD,GAApD,GAA0D,CAAjE;AACH,OALD;AAMH,KATD;;AAUArB,IAAAA,KAAK,CAACsB,oBAAN,GAA6B,UAAUjB,KAAV,EAAiB;AAC1CL,MAAAA,KAAK,CAACM,MAAN,CACKC,SADL,CACe,YADf,EAEKC,UAFL,CAEgBR,KAAK,CAACS,QAAN,CAAeC,WAAf,CAA2BC,aAA3B,CAAyC,yBAAzC,CAFhB,EAGKC,IAHL,CAGU,SAHV,EAGqB,CAHrB;AAIH,KALD;;AAMA,WAAOZ,KAAP;AACH;;AACDF,EAAAA,OAAO,CAACP,SAAR,CAAkBgC,IAAlB,GAAyB,YAAY;AACjC,QAAIC,MAAM,GAAG,KAAKf,QAAL,CAAce,MAA3B,CADiC,CAEjC;;AACAA,IAAAA,MAAM,CAACC,gBAAP,CAAwB9B,MAAM,CAAC+B,MAAP,CAAcC,UAAtC,EAAkD,KAAKb,mBAAvD,EAHiC,CAIjC;;AACAU,IAAAA,MAAM,CAACC,gBAAP,CAAwB9B,MAAM,CAAC+B,MAAP,CAAcE,aAAtC,EAAqD,KAAKN,oBAA1D;AACA,QAAIO,4BAA4B,GAAG,KAAKC,OAAL,CAAaD,4BAAhD;;AACA,QAAIA,4BAAJ,EAAkC;AAC9B;AACAL,MAAAA,MAAM,CAACC,gBAAP,CAAwB9B,MAAM,CAACoC,KAAP,CAAaC,SAArC,EAAgD,KAAK5B,wBAArD,EAF8B,CAG9B;;AACAoB,MAAAA,MAAM,CAACC,gBAAP,CAAwB9B,MAAM,CAACoC,KAAP,CAAaE,QAArC,EAA+C,KAAKpB,2BAApD;AACH;AACJ,GAbD;;AAcAf,EAAAA,OAAO,CAACP,SAAR,CAAkB2C,MAAlB,GAA2B,UAAUC,OAAV,EAAmB;AAC1C;AACA,QAAIC,GAAG,GAAG,KAAKC,eAAL,EAAV;AACA,QAAIC,OAAO,GAAG,KAAKpB,KAAL,CAAWC,UAAX,EAAd;AACA,QAAIF,WAAW,GAAGqB,OAAO,CAAClB,IAAR,CAAaH,WAA/B;AACA,QAAIsB,gBAAgB,GAAG,KAAK9B,QAAL,CAAc+B,eAAd,CAA8BC,mBAA9B,EAAvB;AACA,QAAIC,eAAe,GAAG,KAAKjC,QAAL,CAAc+B,eAAd,CAA8BG,kBAA9B,EAAtB;AACA,QAAIC,OAAO,GAAG,KAAKd,OAAL,CAAac,OAA3B;AACA,QAAIC,WAAJ;;AACA,QAAID,OAAJ,EAAa;AACT,UAAIE,UAAU,GAAG/D,MAAM,CAACgE,IAAP,CAAYT,OAAO,CAACU,IAApB,EAA0BC,IAA1B,CAA+B,UAAUC,IAAV,EAAgB;AAAE,eAAOZ,OAAO,CAACU,IAAR,CAAaE,IAAb,EAAmBJ,UAA1B;AAAuC,OAAxF,CAAjB;AACAD,MAAAA,WAAW,GAAG,KAAK3B,KAAL,CAAWiC,cAAX,CAA0B;AAAEL,QAAAA,UAAU,EAAEA;AAAd,OAA1B,CAAd;AACH,KAHD,MAIK;AACDD,MAAAA,WAAW,GAAG,KAAK3B,KAAL,CACTkC,cADS,GAETC,MAFS,CAEF,UAAUxE,CAAV,EAAa;AACrB,eAAOA,CAAC,CAAC6D,eAAD,CAAD,KAAuBY,SAAvB,IACHzE,CAAC,CAAC6D,eAAD,CAAD,KAAuB,IAD3B;AAEH,OALa,CAAd;AAMH,KApByC,CAqB1C;;;AACA,QAAIa,OAAO,GAAGnB,GAAG,CACZ7B,SADS,CACC,YADD,EAETa,IAFS,CAEJyB,WAFI,EAES,UAAUxB,KAAV,EAAiB;AAAE,aAAOA,KAAK,CAACJ,WAAD,CAAL,GAAqB,GAArB,GAA2BI,KAAK,CAACkB,gBAAD,CAAvC;AAA4D,KAFxF,CAAd,CAtB0C,CAyB1C;;AACAgB,IAAAA,OAAO,CAACC,IAAR,GAAe5C,IAAf,CAAoB,SAApB,EAA+B,CAA/B,EAAkC6C,MAAlC,GA1B0C,CA2B1C;;AACA,QAAIC,eAAe,GAAGH,OAAO,CACxBI,KADiB,GAEjBC,MAFiB,CAEV,QAFU,EAGjBC,OAHiB,CAGT,KAHS,EAGF,IAHE,EAIjBjD,IAJiB,CAIZ,SAJY,EAID,CAJC,CAAtB,CA5B0C,CAiC1C;;AACA,QAAIkD,cAAc,GAAGJ,eAAe,CAACK,KAAhB,CAAsBR,OAAtB,CAArB;AACA,SAAKS,YAAL,CAAkBF,cAAlB,EAAkC3B,OAAlC,EAnC0C,CAoC1C;;AACA,SAAK8B,iBAAL;AACH,GAtCD,CAjD2C,CAwF3C;;;AACAnE,EAAAA,OAAO,CAACP,SAAR,CAAkB2E,2BAAlB,GAAgD,UAAU7C,KAAV,EAAiB8C,KAAjB,EAAwB;AACpE,QAAIC,gBAAgB,GAAG,KAAKtC,OAAL,CAAasC,gBAApC;;AACA,QAAI,CAACA,gBAAL,EAAuB;AACnB,aAAO,KAAP;AACH;;AACD,QAAI5B,eAAe,GAAG,KAAK/B,QAAL,CAAc+B,eAApC;AACA,QAAI6B,WAAW,GAAG7B,eAAe,CAAC8B,cAAhB,EAAlB,CANoE,CAOpE;;AACA,QAAIC,EAAE,GAAG3E,KAAK,CAAC4E,oCAAN,CAA2C,KAAK/D,QAAL,CAAc+B,eAAd,CAA8BiC,yBAA9B,EAA3C,EAAsG,KAAKhE,QAAL,CAAc+B,eAAd,CAA8BkC,wBAA9B,EAAtG,EAAgKL,WAAhK,CAAT;AAAA,QAAuLM,UAAU,GAAGJ,EAAE,CAAC,CAAD,CAAtM;AAAA,QAA2MK,UAAU,GAAGL,EAAE,CAAC,CAAD,CAA1N;;AACA,QAAIM,EAAE,GAAGjF,KAAK,CAAC4E,oCAAN,CAA2C,UAAU3F,CAAV,EAAaiG,CAAb,EAAgB;AAAE,aAAOtC,eAAe,CAACuC,cAAhB,CAA+BlG,CAA/B,EAAkCiG,CAAlC,CAAP;AAA8C,KAA3G,EAA6G,UAAUjG,CAAV,EAAaiG,CAAb,EAAgB;AAAE,aAAOtC,eAAe,CAACwC,aAAhB,CAA8BnG,CAA9B,EAAiCiG,CAAjC,CAAP;AAA6C,KAA5K,EAA8KT,WAA9K,CAAT;AAAA,QAAqMY,SAAS,GAAGJ,EAAE,CAAC,CAAD,CAAnN;AAAA,QAAwNK,SAAS,GAAGL,EAAE,CAAC,CAAD,CAAtO,CAToE,CAUpE;;;AACA,QAAIM,MAAM,GAAGF,SAAS,CAAC5D,KAAD,EAAQ8C,KAAR,CAAtB;AACA,QAAIiB,MAAM,GAAGF,SAAS,CAAC7D,KAAD,EAAQ8C,KAAR,CAAtB,CAZoE,CAapE;AACA;;AACA,QAAIS,UAAU,IAAID,UAAlB,EAA8B;AAC1B,aAAQS,MAAM,IAAIR,UAAU,CAACS,UAArB,IACJF,MAAM,IAAIR,UAAU,CAACU,UADzB;AAEH;;AACD,QAAIT,UAAJ,EAAgB;AACZ,aAAOQ,MAAM,IAAIR,UAAU,CAACS,UAA5B;AACH;;AACD,QAAIV,UAAJ,EAAgB;AACZ,aAAOQ,MAAM,IAAIR,UAAU,CAACU,UAA5B;AACH;AACJ,GAzBD;;AA0BAvF,EAAAA,OAAO,CAACP,SAAR,CAAkByE,YAAlB,GAAiC,UAAUsB,SAAV,EAAqBnD,OAArB,EAA8B;AAC3D,QAAInC,KAAK,GAAG,IAAZ,CAD2D,CAE3D;;;AACA,QAAIsC,OAAO,GAAG,KAAKpB,KAAL,CAAWC,UAAX,EAAd;AACA,QAAIoD,EAAE,GAAGjC,OAAO,CAACiD,MAAjB;AAAA,QAAyBC,MAAM,GAAGjB,EAAE,CAACiB,MAArC;AAAA,QAA6CC,WAAW,GAAGlB,EAAE,CAACkB,WAA9D;AACA,QAAIZ,EAAE,GAAG,KAAKpE,QAAd;AAAA,QAAwB+B,eAAe,GAAGqC,EAAE,CAACrC,eAA7C;AAAA,QAA8D9B,WAAW,GAAGmE,EAAE,CAACnE,WAA/E;AACA,QAAIO,WAAW,GAAGqB,OAAO,CAAClB,IAAR,CAAaH,WAA/B;AACA,QAAIsB,gBAAgB,GAAGC,eAAe,CAACC,mBAAhB,EAAvB;AACA,QAAIC,eAAe,GAAGF,eAAe,CAACG,kBAAhB,EAAtB;;AACA,QAAIoC,cAAc,GAAG,UAAUlG,CAAV,EAAaiG,CAAb,EAAgB;AAAE,aAAOtC,eAAe,CAACuC,cAAhB,CAA+BlG,CAA/B,EAAkCiG,CAAlC,CAAP;AAA8C,KAArF;;AACA,QAAIE,aAAa,GAAG,UAAUnG,CAAV,EAAaiG,CAAb,EAAgB;AAAE,aAAOtC,eAAe,CAACwC,aAAhB,CAA8BnG,CAA9B,EAAiCiG,CAAjC,CAAP;AAA6C,KAAnF;;AACA,QAAIY,EAAE,GAAG9F,KAAK,CAAC4E,oCAAN,CAA2CO,cAA3C,EAA2DC,aAA3D,EAA0ExC,eAAe,CAAC8B,cAAhB,EAA1E,CAAT;AAAA,QAAsHW,SAAS,GAAGS,EAAE,CAAC,CAAD,CAApI;AAAA,QAAyIR,SAAS,GAAGQ,EAAE,CAAC,CAAD,CAAvJ;;AACA,QAAI7D,4BAA4B,GAAG,KAAKC,OAAL,CAAaD,4BAAhD;AACAyD,IAAAA,SAAS,CACJK,KADL,GAEK9B,OAFL,CAEa,KAFb,EAEoB,IAFpB,EAGI;AAHJ,KAIKA,OAJL,CAIa,mBAJb,EAIkC,UAAUhF,CAAV,EAAaiG,CAAb,EAAgB;AAC9C,aAAO9E,KAAK,CAACkE,2BAAN,CAAkCrF,CAAlC,EAAqCiG,CAArC,CAAP;AACH,KAND,EAOKjB,OAPL,CAOa,QAPb,EAOuB,UAAUhF,CAAV,EAAa;AAChC,aAAOmB,KAAK,CAACkB,KAAN,CAAY0E,WAAZ,CAAwB/G,CAAC,CAACoC,WAAD,CAAzB,EAAwCpC,CAAC,CAAC0D,gBAAD,CAAzC,EAA6D1D,CAA7D,EAAgE2G,MAAhE,CAAP;AACH,KATD,EAUK3B,OAVL,CAUa,UAVb,EAUyB,UAAUhF,CAAV,EAAa;AAClC,aAAO,CAACmB,KAAK,CAACkB,KAAN,CAAY0E,WAAZ,CAAwB/G,CAAC,CAACoC,WAAD,CAAzB,EAAwCpC,CAAC,CAAC0D,gBAAD,CAAzC,EAA6D1D,CAA7D,EAAgE2G,MAAhE,CAAR;AACH,KAZD,EAaKhF,UAbL,CAagBE,WAAW,CAACC,aAAZ,CAA0B,sBAA1B,EAAkDwB,OAAlD,CAbhB,EAcKvB,IAdL,CAcU,IAdV,EAcgBqE,SAdhB,EAeKrE,IAfL,CAeU,IAfV,EAegBsE,SAfhB,EAgBKtE,IAhBL,CAgBU,GAhBV,EAgBe0B,OAAO,CAACiD,MAAR,CAAeM,MAhB9B,EAiBKjF,IAjBL,CAiBU,MAjBV,EAiBkB,UAAU/B,CAAV,EAAa;AAC3B,UAAImB,KAAK,CAACkB,KAAN,CAAY0E,WAAZ,CAAwB/G,CAAC,CAACoC,WAAD,CAAzB,EAAwCpC,CAAC,CAAC0D,gBAAD,CAAzC,EAA6D1D,CAA7D,EAAgE2G,MAAhE,CAAJ,EAA6E;AACzE,eAAOxF,KAAK,CAACkB,KAAN,CAAY4E,YAAZ,CAAyBjH,CAAC,CAACoC,WAAD,CAA1B,EAAyCpC,CAAC,CAAC0D,gBAAD,CAA1C,EAA8D1D,CAA9D,CAAP;AACH;AACJ,KArBD,EAsBK+B,IAtBL,CAsBU,cAtBV,EAsB0B4E,MAAM,GAAGC,WAAH,GAAiB,CAtBjD,EAuBK7E,IAvBL,CAuBU,QAvBV,EAuBoB,UAAU/B,CAAV,EAAa;AAC7B,aAAOmB,KAAK,CAACkB,KAAN,CAAY6E,cAAZ,CAA2BlH,CAAC,CAACoC,WAAD,CAA5B,EAA2CpC,CAAC,CAAC0D,gBAAD,CAA5C,EAAgE1D,CAAhE,CAAP;AACH,KAzBD,EA0BK+B,IA1BL,CA0BU,SA1BV,EA0BqBiB,4BAA4B,GAAG,CAAH,GAAO,CA1BxD,EA2BI;AA3BJ,KA4BKjB,IA5BL,CA4BU,MA5BV,EA4BkBlB,KAAK,CAACsG,eA5BxB,EA6BKpF,IA7BL,CA6BU,sBA7BV,EA6BkC,OA7BlC,EA8BKA,IA9BL,CA8BU,YA9BV,EA8BwB,UAAU/B,CAAV,EAAa;AAAE,aAAOA,CAAC,CAAC6D,eAAD,CAAR;AAA4B,KA9BnE,EAb2D,CA4C3D;;AACA,SAAKuB,iBAAL;AACH,GA9CD;;AA+CAnE,EAAAA,OAAO,CAACP,SAAR,CAAkB0E,iBAAlB,GAAsC,YAAY;AAC9C,QAAIgC,IAAI,GAAG,IAAX;AACA,QAAIhF,WAAW,GAAG,KAAKC,KAAL,CAAWC,UAAX,GAAwBC,IAAxB,CAA6BH,WAA/C;AACA,QAAIsB,gBAAgB,GAAG,KAAK9B,QAAL,CAAc+B,eAAd,CAA8BC,mBAA9B,EAAvB;AACA,SAAKnC,MAAL,CACKC,SADL,CACe,QADf,EAEK2F,EAFL,CAEQ,WAFR,EAEqB,UAAU7E,KAAV,EAAiB;AAClC,UAAIN,cAAc,GAAGlB,MAAM,CAAC,IAAD,CAA3B;AACAkB,MAAAA,cAAc,CACT8C,OADL,CACa,SADb,EACwB,IADxB,EAEKsC,KAFL,CAEW,MAFX,EAEmB,UAAUtH,CAAV,EAAa;AAC5B,eAAOoH,IAAI,CAAC/E,KAAL,CAAW4E,YAAX,CAAwBjH,CAAC,CAACoC,WAAD,CAAzB,EAAwCpC,CAAC,CAAC0D,gBAAD,CAAzC,EAA6D1D,CAA7D,CAAP;AACH,OAJD;AAKA,UAAIuH,QAAQ,GAAGH,IAAI,CAACxF,QAAL,CAAc+B,eAAd,CAA8BuC,cAA9B,CAA6C1D,KAA7C,CAAf;AACA,UAAIgF,QAAQ,GAAGJ,IAAI,CAACxF,QAAL,CAAc+B,eAAd,CAA8BwC,aAA9B,CAA4C3D,KAA5C,CAAf;AACA,UAAIiF,eAAe,GAAGL,IAAI,CAAC/E,KAAL,CACjBkC,cADiB,GAEjBC,MAFiB,CAEV,UAAUxE,CAAV,EAAa;AACrB,eAAQuH,QAAQ,KACZH,IAAI,CAACxF,QAAL,CAAc+B,eAAd,CAA8BuC,cAA9B,CAA6ClG,CAA7C,CADI,IAEJwH,QAAQ,KACJJ,IAAI,CAACxF,QAAL,CAAc+B,eAAd,CAA8BwC,aAA9B,CAA4CnG,CAA5C,CAHR;AAIH,OAPqB,CAAtB,CATkC,CAiBlC;;AACAoH,MAAAA,IAAI,CAACxF,QAAL,CAAce,MAAd,CAAqB+E,aAArB,CAAmC5G,MAAM,CAAC6G,OAAP,CAAeC,IAAlD,EAAwD;AACpD1F,QAAAA,cAAc,EAAEA,cADoC;AAEpDK,QAAAA,IAAI,EAAEkF;AAF8C,OAAxD,EAlBkC,CAsBlC;;AACAL,MAAAA,IAAI,CAACxF,QAAL,CAAce,MAAd,CAAqB+E,aAArB,CAAmC5G,MAAM,CAACG,OAAP,CAAe4G,iBAAlD,EAAqE;AACjEC,QAAAA,OAAO,EAAE5F,cADwD;AAEjEM,QAAAA,KAAK,EAAEA;AAF0D,OAArE;AAIH,KA7BD,EA8BK6E,EA9BL,CA8BQ,WA9BR,EA8BqB,UAAU7E,KAAV,EAAiB;AAClC,UAAIN,cAAc,GAAGlB,MAAM,CAAC,IAAD,CAA3B,CADkC,CAElC;;AACAoG,MAAAA,IAAI,CAACxF,QAAL,CAAce,MAAd,CAAqB+E,aAArB,CAAmC5G,MAAM,CAACG,OAAP,CAAe8G,iBAAlD,EAAqE;AACjED,QAAAA,OAAO,EAAE5F,cADwD;AAEjEM,QAAAA,KAAK,EAAEA;AAF0D,OAArE;AAIA4E,MAAAA,IAAI,CAACxF,QAAL,CAAce,MAAd,CAAqB+E,aAArB,CAAmC5G,MAAM,CAAC6G,OAAP,CAAeK,IAAlD;AACH,KAtCD,EAuCKX,EAvCL,CAuCQ,OAvCR,EAuCiB,UAAU7E,KAAV,EAAiB;AAC9B;AACA4E,MAAAA,IAAI,CAACxF,QAAL,CAAce,MAAd,CAAqB+E,aAArB,CAAmC5G,MAAM,CAACG,OAAP,CAAegH,aAAlD,EAAiE;AAC7DH,QAAAA,OAAO,EAAE9G,MAAM,CAAC,IAAD,CAD8C;AAE7DwB,QAAAA,KAAK,EAAEA;AAFsD,OAAjE;AAIH,KA7CD,EA8CK6E,EA9CL,CA8CQ,UA9CR,EA8CoB,UAAU7E,KAAV,EAAiB;AACjC,UAAIN,cAAc,GAAGlB,MAAM,CAAC,IAAD,CAA3B;AACAkB,MAAAA,cAAc,CAAC8C,OAAf,CAAuB,SAAvB,EAAkC,KAAlC;;AACA,UAAI,CAACoC,IAAI,CAACnE,OAAL,CAAa0D,MAAlB,EAA0B;AACtBzE,QAAAA,cAAc,CAACoF,KAAf,CAAqB,MAArB,EAA6B,IAA7B;AACH,OALgC,CAMjC;;;AACAF,MAAAA,IAAI,CAACxF,QAAL,CAAce,MAAd,CAAqB+E,aAArB,CAAmC5G,MAAM,CAACG,OAAP,CAAeiH,gBAAlD,EAAoE;AAChEJ,QAAAA,OAAO,EAAE5F,cADuD;AAEhEM,QAAAA,KAAK,EAAEA;AAFyD,OAApE,EAPiC,CAWjC;;AACA4E,MAAAA,IAAI,CAACxF,QAAL,CAAce,MAAd,CAAqB+E,aAArB,CAAmC5G,MAAM,CAAC6G,OAAP,CAAeQ,IAAlD,EAAwD;AACpDjG,QAAAA,cAAc,EAAEA;AADoC,OAAxD;AAGH,KA7DD;AA8DH,GAlED;;AAmEAjB,EAAAA,OAAO,CAACP,SAAR,CAAkB0H,OAAlB,GAA4B,YAAY;AACpC;AACA,SAAK3G,MAAL,CACKC,SADL,CACe,QADf,EAEK2F,EAFL,CAEQ,WAFR,EAEqB,IAFrB,EAGKA,EAHL,CAGQ,UAHR,EAGoB,IAHpB,EAFoC,CAMpC;;AACA,QAAI1E,MAAM,GAAG,KAAKf,QAAL,CAAce,MAA3B;AACAA,IAAAA,MAAM,CAAC0F,mBAAP,CAA2BvH,MAAM,CAAC+B,MAAP,CAAcC,UAAzC,EAAqD,KAAKb,mBAA1D;AACAU,IAAAA,MAAM,CAAC0F,mBAAP,CAA2BvH,MAAM,CAAC+B,MAAP,CAAcE,aAAzC,EAAwD,KAAKN,oBAA7D;AACAE,IAAAA,MAAM,CAAC0F,mBAAP,CAA2BvH,MAAM,CAACoC,KAAP,CAAaC,SAAxC,EAAmD,KAAK5B,wBAAxD;AACAoB,IAAAA,MAAM,CAAC0F,mBAAP,CAA2BvH,MAAM,CAACoC,KAAP,CAAaE,QAAxC,EAAkD,KAAKpB,2BAAvD;AACH,GAZD;;AAaA,SAAOf,OAAP;AACH,CAnP4B,CAmP3BL,SAnP2B,CAA7B;;AAoPA,SAASK,OAAT","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// Internal Imports\nimport { Component } from \"../component\";\nimport { Roles, Events } from \"../../interfaces\";\nimport { Tools } from \"../../tools\";\n// D3 Imports\nimport { select } from \"d3-selection\";\nvar Scatter = /** @class */ (function (_super) {\n    __extends(Scatter, _super);\n    function Scatter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = \"scatter\";\n        _this.handleChartHolderOnHover = function (event) {\n            _this.parent\n                .selectAll(\"circle.dot\")\n                .transition(_this.services.transitions.getTransition(\"chart-holder-hover-scatter\"))\n                .attr(\"opacity\", 1);\n        };\n        _this.handleChartHolderOnMouseOut = function (event) {\n            _this.parent\n                .selectAll(\"circle.dot\")\n                .transition(_this.services.transitions.getTransition(\"chart-holder-mouseout-scatter\"))\n                .attr(\"opacity\", 0);\n        };\n        _this.handleLegendOnHover = function (event) {\n            var hoveredElement = event.detail.hoveredElement;\n            var groupMapsTo = _this.model.getOptions().data.groupMapsTo;\n            _this.parent\n                .selectAll(\"circle.dot\")\n                .transition(_this.services.transitions.getTransition(\"legend-hover-scatter\"))\n                .attr(\"opacity\", function (d) {\n                return d[groupMapsTo] !== hoveredElement.datum()[\"name\"] ? 0.3 : 1;\n            });\n        };\n        _this.handleLegendMouseOut = function (event) {\n            _this.parent\n                .selectAll(\"circle.dot\")\n                .transition(_this.services.transitions.getTransition(\"legend-mouseout-scatter\"))\n                .attr(\"opacity\", 1);\n        };\n        return _this;\n    }\n    Scatter.prototype.init = function () {\n        var events = this.services.events;\n        // Highlight correct circle on legend item hovers\n        events.addEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n        // Un-highlight circles on legend item mouseouts\n        events.addEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n        var fadeInOnChartHolderMouseover = this.configs.fadeInOnChartHolderMouseover;\n        if (fadeInOnChartHolderMouseover) {\n            // Fade-in scatter circles\n            events.addEventListener(Events.Chart.MOUSEOVER, this.handleChartHolderOnHover);\n            // Fade-out scatter circles\n            events.addEventListener(Events.Chart.MOUSEOUT, this.handleChartHolderOnMouseOut);\n        }\n    };\n    Scatter.prototype.render = function (animate) {\n        // Grab container SVG\n        var svg = this.getContainerSVG();\n        var options = this.model.getOptions();\n        var groupMapsTo = options.data.groupMapsTo;\n        var domainIdentifier = this.services.cartesianScales.getDomainIdentifier();\n        var rangeIdentifier = this.services.cartesianScales.getRangeIdentifier();\n        var stacked = this.configs.stacked;\n        var scatterData;\n        if (stacked) {\n            var percentage = Object.keys(options.axes).some(function (axis) { return options.axes[axis].percentage; });\n            scatterData = this.model.getStackedData({ percentage: percentage });\n        }\n        else {\n            scatterData = this.model\n                .getDisplayData()\n                .filter(function (d) {\n                return d[rangeIdentifier] !== undefined &&\n                    d[rangeIdentifier] !== null;\n            });\n        }\n        // Update data on dot groups\n        var circles = svg\n            .selectAll(\"circle.dot\")\n            .data(scatterData, function (datum) { return datum[groupMapsTo] + \"-\" + datum[domainIdentifier]; });\n        // Remove circles that need to be removed\n        circles.exit().attr(\"opacity\", 0).remove();\n        // Add the dot groups that need to be introduced\n        var enteringCircles = circles\n            .enter()\n            .append(\"circle\")\n            .classed(\"dot\", true)\n            .attr(\"opacity\", 0);\n        // Apply styling & position\n        var circlesToStyle = enteringCircles.merge(circles);\n        this.styleCircles(circlesToStyle, animate);\n        // Add event listeners to elements drawn\n        this.addEventListeners();\n    };\n    // A value is an anomaly if is above all defined domain and range thresholds\n    Scatter.prototype.isDatapointThresholdAnomaly = function (datum, index) {\n        var handleThresholds = this.configs.handleThresholds;\n        if (!handleThresholds) {\n            return false;\n        }\n        var cartesianScales = this.services.cartesianScales;\n        var orientation = cartesianScales.getOrientation();\n        // Get highest domain and range thresholds\n        var _a = Tools.flipDomainAndRangeBasedOnOrientation(this.services.cartesianScales.getHighestDomainThreshold(), this.services.cartesianScales.getHighestRangeThreshold(), orientation), xThreshold = _a[0], yThreshold = _a[1];\n        var _b = Tools.flipDomainAndRangeBasedOnOrientation(function (d, i) { return cartesianScales.getDomainValue(d, i); }, function (d, i) { return cartesianScales.getRangeValue(d, i); }, orientation), getXValue = _b[0], getYValue = _b[1];\n        // Get datum x and y values\n        var xValue = getXValue(datum, index);\n        var yValue = getYValue(datum, index);\n        // To be an anomaly, the value has to be higher or equal than the threshold value\n        // (if are present, both range and domain threshold values)\n        if (yThreshold && xThreshold) {\n            return (yValue <= yThreshold.scaleValue &&\n                xValue >= xThreshold.scaleValue);\n        }\n        if (yThreshold) {\n            return yValue <= yThreshold.scaleValue;\n        }\n        if (xThreshold) {\n            return xValue >= xThreshold.scaleValue;\n        }\n    };\n    Scatter.prototype.styleCircles = function (selection, animate) {\n        var _this = this;\n        // Chart options mixed with the internal configurations\n        var options = this.model.getOptions();\n        var _a = options.points, filled = _a.filled, fillOpacity = _a.fillOpacity;\n        var _b = this.services, cartesianScales = _b.cartesianScales, transitions = _b.transitions;\n        var groupMapsTo = options.data.groupMapsTo;\n        var domainIdentifier = cartesianScales.getDomainIdentifier();\n        var rangeIdentifier = cartesianScales.getRangeIdentifier();\n        var getDomainValue = function (d, i) { return cartesianScales.getDomainValue(d, i); };\n        var getRangeValue = function (d, i) { return cartesianScales.getRangeValue(d, i); };\n        var _c = Tools.flipDomainAndRangeBasedOnOrientation(getDomainValue, getRangeValue, cartesianScales.getOrientation()), getXValue = _c[0], getYValue = _c[1];\n        var fadeInOnChartHolderMouseover = this.configs.fadeInOnChartHolderMouseover;\n        selection\n            .raise()\n            .classed(\"dot\", true)\n            // Set class to highlight the dots that are above all the thresholds, in both directions (vertical and horizontal)\n            .classed(\"threshold-anomaly\", function (d, i) {\n            return _this.isDatapointThresholdAnomaly(d, i);\n        })\n            .classed(\"filled\", function (d) {\n            return _this.model.getIsFilled(d[groupMapsTo], d[domainIdentifier], d, filled);\n        })\n            .classed(\"unfilled\", function (d) {\n            return !_this.model.getIsFilled(d[groupMapsTo], d[domainIdentifier], d, filled);\n        })\n            .transition(transitions.getTransition(\"scatter-update-enter\", animate))\n            .attr(\"cx\", getXValue)\n            .attr(\"cy\", getYValue)\n            .attr(\"r\", options.points.radius)\n            .attr(\"fill\", function (d) {\n            if (_this.model.getIsFilled(d[groupMapsTo], d[domainIdentifier], d, filled)) {\n                return _this.model.getFillColor(d[groupMapsTo], d[domainIdentifier], d);\n            }\n        })\n            .attr(\"fill-opacity\", filled ? fillOpacity : 1)\n            .attr(\"stroke\", function (d) {\n            return _this.model.getStrokeColor(d[groupMapsTo], d[domainIdentifier], d);\n        })\n            .attr(\"opacity\", fadeInOnChartHolderMouseover ? 0 : 1)\n            // a11y\n            .attr(\"role\", Roles.GRAPHICS_SYMBOL)\n            .attr(\"aria-roledescription\", \"point\")\n            .attr(\"aria-label\", function (d) { return d[rangeIdentifier]; });\n        // Add event listeners to elements drawn\n        this.addEventListeners();\n    };\n    Scatter.prototype.addEventListeners = function () {\n        var self = this;\n        var groupMapsTo = this.model.getOptions().data.groupMapsTo;\n        var domainIdentifier = this.services.cartesianScales.getDomainIdentifier();\n        this.parent\n            .selectAll(\"circle\")\n            .on(\"mouseover\", function (datum) {\n            var hoveredElement = select(this);\n            hoveredElement\n                .classed(\"hovered\", true)\n                .style(\"fill\", function (d) {\n                return self.model.getFillColor(d[groupMapsTo], d[domainIdentifier], d);\n            });\n            var hoveredX = self.services.cartesianScales.getDomainValue(datum);\n            var hoveredY = self.services.cartesianScales.getRangeValue(datum);\n            var overlappingData = self.model\n                .getDisplayData()\n                .filter(function (d) {\n                return (hoveredX ===\n                    self.services.cartesianScales.getDomainValue(d) &&\n                    hoveredY ===\n                        self.services.cartesianScales.getRangeValue(d));\n            });\n            // Show tooltip\n            self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n                hoveredElement: hoveredElement,\n                data: overlappingData\n            });\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Scatter.SCATTER_MOUSEOVER, {\n                element: hoveredElement,\n                datum: datum\n            });\n        })\n            .on(\"mousemove\", function (datum) {\n            var hoveredElement = select(this);\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Scatter.SCATTER_MOUSEMOVE, {\n                element: hoveredElement,\n                datum: datum\n            });\n            self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n        })\n            .on(\"click\", function (datum) {\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Scatter.SCATTER_CLICK, {\n                element: select(this),\n                datum: datum\n            });\n        })\n            .on(\"mouseout\", function (datum) {\n            var hoveredElement = select(this);\n            hoveredElement.classed(\"hovered\", false);\n            if (!self.configs.filled) {\n                hoveredElement.style(\"fill\", null);\n            }\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Scatter.SCATTER_MOUSEOUT, {\n                element: hoveredElement,\n                datum: datum\n            });\n            // Hide tooltip\n            self.services.events.dispatchEvent(Events.Tooltip.HIDE, {\n                hoveredElement: hoveredElement\n            });\n        });\n    };\n    Scatter.prototype.destroy = function () {\n        // Remove event listeners\n        this.parent\n            .selectAll(\"circle\")\n            .on(\"mousemove\", null)\n            .on(\"mouseout\", null);\n        // Remove legend listeners\n        var events = this.services.events;\n        events.removeEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n        events.removeEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n        events.removeEventListener(Events.Chart.MOUSEOVER, this.handleChartHolderOnHover);\n        events.removeEventListener(Events.Chart.MOUSEOUT, this.handleChartHolderOnMouseOut);\n    };\n    return Scatter;\n}(Component));\nexport { Scatter };\n//# sourceMappingURL=../../../src/components/graphs/scatter.js.map"]},"metadata":{},"sourceType":"module"}
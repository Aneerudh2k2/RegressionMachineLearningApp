{"ast":null,"code":"var __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}; // Internal Imports\n\n\nimport { LayoutGrowth, LayoutDirection, LegendOrientations, Events as ChartEvents } from \"./interfaces\"; // Misc\n\nimport { ChartModel } from \"./model\";\nimport { Title, Legend, LayoutComponent, Tooltip, Spacer } from \"./components\";\nimport { Tools } from \"./tools\"; // Services\n\nimport { DOMUtils, Events, Transitions } from \"./services/index\";\n\nvar Chart =\n/** @class */\nfunction () {\n  function Chart(holder, chartConfigs) {\n    this.services = {\n      domUtils: DOMUtils,\n      events: Events,\n      transitions: Transitions\n    };\n    this.model = new ChartModel(this.services);\n  } // Contains the code that uses properties that are overridable by the super-class\n\n\n  Chart.prototype.init = function (holder, chartConfigs) {\n    var _this = this; // Store the holder in the model\n\n\n    this.model.set({\n      holder: holder\n    }, true); // Initialize all services\n\n    Object.keys(this.services).forEach(function (serviceName) {\n      var serviceObj = _this.services[serviceName];\n      _this.services[serviceName] = new serviceObj(_this.model, _this.services);\n    }); // Call update() when model has been updated\n\n    this.services.events.addEventListener(ChartEvents.Model.UPDATE, function () {\n      _this.update(true);\n    }); // Set model data & options\n\n    this.model.setData(chartConfigs.data); // Set chart resize event listener\n\n    this.services.events.addEventListener(ChartEvents.Chart.RESIZE, function () {\n      _this.update(false);\n    });\n    this.components = this.getComponents();\n    this.update();\n  };\n\n  Chart.prototype.getComponents = function () {\n    console.error(\"getComponents() method is not implemented\");\n    return null;\n  };\n\n  Chart.prototype.update = function (animate) {\n    var _this = this;\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    if (!this.components) {\n      return;\n    } // Update all services\n\n\n    Object.keys(this.services).forEach(function (serviceName) {\n      var serviceObj = _this.services[serviceName];\n      serviceObj.update();\n    }); // Render all components\n\n    this.components.forEach(function (component) {\n      return component.render(animate);\n    }); // Asynchronously dispatch a \"render-finished\" event\n    // This is needed because of d3-transitions\n    // Since at the start of the transition\n    // Elements do not hold their final size or position\n\n    var pendingTransitions = this.services.transitions.getPendingTransitions();\n    var promises = Object.keys(pendingTransitions).map(function (transitionID) {\n      var transition = pendingTransitions[transitionID];\n      return transition.end().catch(function (e) {\n        return e;\n      }); // Skip rejects since we don't care about those;\n    });\n    Promise.all(promises).then(function () {\n      return _this.services.events.dispatchEvent(ChartEvents.Chart.RENDER_FINISHED);\n    });\n  };\n\n  Chart.prototype.destroy = function () {\n    // Call the destroy() method on all components\n    this.components.forEach(function (component) {\n      return component.destroy();\n    }); // Remove the chart holder\n\n    this.services.domUtils.getHolder().remove();\n    this.model.set({\n      destroyed: true\n    }, true);\n  };\n\n  Chart.prototype.getChartComponents = function (graphFrameComponents) {\n    var titleComponent = {\n      id: \"title\",\n      components: [new Title(this.model, this.services)],\n      growth: {\n        x: LayoutGrowth.PREFERRED,\n        y: LayoutGrowth.FIXED\n      }\n    };\n    var legendComponent = {\n      id: \"legend\",\n      components: [new Legend(this.model, this.services)],\n      growth: {\n        x: LayoutGrowth.PREFERRED,\n        y: LayoutGrowth.FIXED\n      }\n    };\n    var graphFrameComponent = {\n      id: \"graph-frame\",\n      components: graphFrameComponents,\n      growth: {\n        x: LayoutGrowth.STRETCH,\n        y: LayoutGrowth.FIXED\n      }\n    };\n    var isLegendEnabled = this.model.getOptions().legend.enabled !== false; // TODORF - REUSE BETWEEN AXISCHART & CHART\n    // Decide the position of the legend in reference to the chart\n\n    var fullFrameComponentDirection = LayoutDirection.COLUMN;\n\n    if (isLegendEnabled) {\n      var legendPosition = Tools.getProperty(this.model.getOptions(), \"legend\", \"position\");\n\n      if (legendPosition === \"left\") {\n        fullFrameComponentDirection = LayoutDirection.ROW;\n\n        if (!this.model.getOptions().legend.orientation) {\n          this.model.getOptions().legend.orientation = LegendOrientations.VERTICAL;\n        }\n      } else if (legendPosition === \"right\") {\n        fullFrameComponentDirection = LayoutDirection.ROW_REVERSE;\n\n        if (!this.model.getOptions().legend.orientation) {\n          this.model.getOptions().legend.orientation = LegendOrientations.VERTICAL;\n        }\n      } else if (legendPosition === \"bottom\") {\n        fullFrameComponentDirection = LayoutDirection.COLUMN_REVERSE;\n      }\n    }\n\n    var legendSpacerComponent = {\n      id: \"spacer\",\n      components: [new Spacer(this.model, this.services)],\n      growth: {\n        x: LayoutGrowth.PREFERRED,\n        y: LayoutGrowth.FIXED\n      }\n    };\n    var fullFrameComponent = {\n      id: \"full-frame\",\n      components: [new LayoutComponent(this.model, this.services, __spreadArrays(isLegendEnabled ? [legendComponent] : [], isLegendEnabled ? [legendSpacerComponent] : [], [graphFrameComponent]), {\n        direction: fullFrameComponentDirection\n      })],\n      growth: {\n        x: LayoutGrowth.STRETCH,\n        y: LayoutGrowth.FIXED\n      }\n    }; // Add chart title if it exists\n\n    var topLevelLayoutComponents = [];\n\n    if (this.model.getOptions().title) {\n      topLevelLayoutComponents.push(titleComponent);\n      var titleSpacerComponent = {\n        id: \"spacer\",\n        components: [new Spacer(this.model, this.services)],\n        growth: {\n          x: LayoutGrowth.PREFERRED,\n          y: LayoutGrowth.FIXED\n        }\n      };\n      topLevelLayoutComponents.push(titleSpacerComponent);\n    }\n\n    topLevelLayoutComponents.push(fullFrameComponent);\n    return [new Tooltip(this.model, this.services), new LayoutComponent(this.model, this.services, topLevelLayoutComponents, {\n      direction: LayoutDirection.COLUMN\n    })];\n  };\n\n  return Chart;\n}();\n\nexport { Chart };","map":{"version":3,"sources":["/Users/nicholasrenotte/Desktop/Regression/app/client/node_modules/@carbon/charts/chart.js"],"names":["__spreadArrays","s","i","il","arguments","length","r","Array","k","a","j","jl","LayoutGrowth","LayoutDirection","LegendOrientations","Events","ChartEvents","ChartModel","Title","Legend","LayoutComponent","Tooltip","Spacer","Tools","DOMUtils","Transitions","Chart","holder","chartConfigs","services","domUtils","events","transitions","model","prototype","init","_this","set","Object","keys","forEach","serviceName","serviceObj","addEventListener","Model","UPDATE","update","setData","data","RESIZE","components","getComponents","console","error","animate","component","render","pendingTransitions","getPendingTransitions","promises","map","transitionID","transition","end","catch","e","Promise","all","then","dispatchEvent","RENDER_FINISHED","destroy","getHolder","remove","destroyed","getChartComponents","graphFrameComponents","titleComponent","id","growth","x","PREFERRED","y","FIXED","legendComponent","graphFrameComponent","STRETCH","isLegendEnabled","getOptions","legend","enabled","fullFrameComponentDirection","COLUMN","legendPosition","getProperty","ROW","orientation","VERTICAL","ROW_REVERSE","COLUMN_REVERSE","legendSpacerComponent","fullFrameComponent","direction","topLevelLayoutComponents","title","push","titleSpacerComponent"],"mappings":"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","sourcesContent":["var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\n// Internal Imports\nimport { LayoutGrowth, LayoutDirection, LegendOrientations, Events as ChartEvents } from \"./interfaces\";\n// Misc\nimport { ChartModel } from \"./model\";\nimport { Title, Legend, LayoutComponent, Tooltip, Spacer } from \"./components\";\nimport { Tools } from \"./tools\";\n// Services\nimport { DOMUtils, Events, Transitions } from \"./services/index\";\nvar Chart = /** @class */ (function () {\n    function Chart(holder, chartConfigs) {\n        this.services = {\n            domUtils: DOMUtils,\n            events: Events,\n            transitions: Transitions\n        };\n        this.model = new ChartModel(this.services);\n    }\n    // Contains the code that uses properties that are overridable by the super-class\n    Chart.prototype.init = function (holder, chartConfigs) {\n        var _this = this;\n        // Store the holder in the model\n        this.model.set({ holder: holder }, true);\n        // Initialize all services\n        Object.keys(this.services).forEach(function (serviceName) {\n            var serviceObj = _this.services[serviceName];\n            _this.services[serviceName] = new serviceObj(_this.model, _this.services);\n        });\n        // Call update() when model has been updated\n        this.services.events.addEventListener(ChartEvents.Model.UPDATE, function () {\n            _this.update(true);\n        });\n        // Set model data & options\n        this.model.setData(chartConfigs.data);\n        // Set chart resize event listener\n        this.services.events.addEventListener(ChartEvents.Chart.RESIZE, function () {\n            _this.update(false);\n        });\n        this.components = this.getComponents();\n        this.update();\n    };\n    Chart.prototype.getComponents = function () {\n        console.error(\"getComponents() method is not implemented\");\n        return null;\n    };\n    Chart.prototype.update = function (animate) {\n        var _this = this;\n        if (animate === void 0) { animate = true; }\n        if (!this.components) {\n            return;\n        }\n        // Update all services\n        Object.keys(this.services).forEach(function (serviceName) {\n            var serviceObj = _this.services[serviceName];\n            serviceObj.update();\n        });\n        // Render all components\n        this.components.forEach(function (component) { return component.render(animate); });\n        // Asynchronously dispatch a \"render-finished\" event\n        // This is needed because of d3-transitions\n        // Since at the start of the transition\n        // Elements do not hold their final size or position\n        var pendingTransitions = this.services.transitions.getPendingTransitions();\n        var promises = Object.keys(pendingTransitions).map(function (transitionID) {\n            var transition = pendingTransitions[transitionID];\n            return transition.end().catch(function (e) { return e; }); // Skip rejects since we don't care about those;\n        });\n        Promise.all(promises).then(function () {\n            return _this.services.events.dispatchEvent(ChartEvents.Chart.RENDER_FINISHED);\n        });\n    };\n    Chart.prototype.destroy = function () {\n        // Call the destroy() method on all components\n        this.components.forEach(function (component) { return component.destroy(); });\n        // Remove the chart holder\n        this.services.domUtils.getHolder().remove();\n        this.model.set({ destroyed: true }, true);\n    };\n    Chart.prototype.getChartComponents = function (graphFrameComponents) {\n        var titleComponent = {\n            id: \"title\",\n            components: [new Title(this.model, this.services)],\n            growth: {\n                x: LayoutGrowth.PREFERRED,\n                y: LayoutGrowth.FIXED\n            }\n        };\n        var legendComponent = {\n            id: \"legend\",\n            components: [new Legend(this.model, this.services)],\n            growth: {\n                x: LayoutGrowth.PREFERRED,\n                y: LayoutGrowth.FIXED\n            }\n        };\n        var graphFrameComponent = {\n            id: \"graph-frame\",\n            components: graphFrameComponents,\n            growth: {\n                x: LayoutGrowth.STRETCH,\n                y: LayoutGrowth.FIXED\n            }\n        };\n        var isLegendEnabled = this.model.getOptions().legend.enabled !== false;\n        // TODORF - REUSE BETWEEN AXISCHART & CHART\n        // Decide the position of the legend in reference to the chart\n        var fullFrameComponentDirection = LayoutDirection.COLUMN;\n        if (isLegendEnabled) {\n            var legendPosition = Tools.getProperty(this.model.getOptions(), \"legend\", \"position\");\n            if (legendPosition === \"left\") {\n                fullFrameComponentDirection = LayoutDirection.ROW;\n                if (!this.model.getOptions().legend.orientation) {\n                    this.model.getOptions().legend.orientation =\n                        LegendOrientations.VERTICAL;\n                }\n            }\n            else if (legendPosition === \"right\") {\n                fullFrameComponentDirection = LayoutDirection.ROW_REVERSE;\n                if (!this.model.getOptions().legend.orientation) {\n                    this.model.getOptions().legend.orientation =\n                        LegendOrientations.VERTICAL;\n                }\n            }\n            else if (legendPosition === \"bottom\") {\n                fullFrameComponentDirection = LayoutDirection.COLUMN_REVERSE;\n            }\n        }\n        var legendSpacerComponent = {\n            id: \"spacer\",\n            components: [new Spacer(this.model, this.services)],\n            growth: {\n                x: LayoutGrowth.PREFERRED,\n                y: LayoutGrowth.FIXED\n            }\n        };\n        var fullFrameComponent = {\n            id: \"full-frame\",\n            components: [\n                new LayoutComponent(this.model, this.services, __spreadArrays((isLegendEnabled ? [legendComponent] : []), (isLegendEnabled ? [legendSpacerComponent] : []), [\n                    graphFrameComponent\n                ]), {\n                    direction: fullFrameComponentDirection\n                })\n            ],\n            growth: {\n                x: LayoutGrowth.STRETCH,\n                y: LayoutGrowth.FIXED\n            }\n        };\n        // Add chart title if it exists\n        var topLevelLayoutComponents = [];\n        if (this.model.getOptions().title) {\n            topLevelLayoutComponents.push(titleComponent);\n            var titleSpacerComponent = {\n                id: \"spacer\",\n                components: [new Spacer(this.model, this.services)],\n                growth: {\n                    x: LayoutGrowth.PREFERRED,\n                    y: LayoutGrowth.FIXED\n                }\n            };\n            topLevelLayoutComponents.push(titleSpacerComponent);\n        }\n        topLevelLayoutComponents.push(fullFrameComponent);\n        return [\n            new Tooltip(this.model, this.services),\n            new LayoutComponent(this.model, this.services, topLevelLayoutComponents, {\n                direction: LayoutDirection.COLUMN\n            })\n        ];\n    };\n    return Chart;\n}());\nexport { Chart };\n//# sourceMappingURL=../src/chart.js.map"]},"metadata":{},"sourceType":"module"}
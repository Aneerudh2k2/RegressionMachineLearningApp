{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Component } from \"../component\";\nimport { Tools } from \"../../tools\";\nimport { DOMUtils } from \"../../services\"; // Carbon position service\n\nimport Position, { PLACEMENTS } from \"@carbon/utils-position\"; // import the settings for the css prefix\n\nimport settings from \"carbon-components/es/globals/js/settings\"; // D3 Imports\n\nimport { select, mouse } from \"d3-selection\";\nimport { Events, TruncationTypes } from \"../../interfaces\";\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  __extends(Tooltip, _super);\n\n  function Tooltip(model, services, configs) {\n    var _this = _super.call(this, model, services, configs) || this;\n\n    _this.type = \"tooltip\";\n    _this.positionService = new Position();\n\n    _this.init();\n\n    return _this;\n  }\n\n  Tooltip.prototype.init = function () {\n    var _this = this; // Grab the tooltip element\n\n\n    var holder = select(this.services.domUtils.getHolder());\n    var chartprefix = Tools.getProperty(this.model.getOptions(), \"style\", \"prefix\");\n    this.tooltip = DOMUtils.appendOrSelect(holder, \"div.\" + settings.prefix + \"--\" + chartprefix + \"--tooltip\"); // Apply html content to the tooltip\n\n    var tooltipTextContainer = DOMUtils.appendOrSelect(this.tooltip, \"div.content-box\");\n    this.tooltip.style(\"max-width\", null); // listen to move-tooltip Custom Events to move the tooltip\n\n    this.services.events.addEventListener(Events.Tooltip.MOVE, function (e) {\n      _this.positionTooltip(e);\n    }); // listen to show-tooltip Custom Events to render the tooltip\n\n    this.services.events.addEventListener(Events.Tooltip.SHOW, function (e) {\n      var data = e.detail.data;\n\n      var defaultHTML = _this.getTooltipHTML(e); // if there is a provided tooltip HTML function call it\n\n\n      if (Tools.getProperty(_this.model.getOptions(), \"tooltip\", \"customHTML\")) {\n        tooltipTextContainer.html(_this.model.getOptions().tooltip.customHTML(data, defaultHTML));\n      } else {\n        // Use default tooltip\n        tooltipTextContainer.html(defaultHTML);\n      } // Position the tooltip\n\n\n      _this.positionTooltip(e); // Fade in\n\n\n      _this.tooltip.classed(\"hidden\", false);\n    }); // listen to hide-tooltip Custom Events to hide the tooltip\n\n    this.services.events.addEventListener(Events.Tooltip.HIDE, function () {\n      _this.tooltip.classed(\"hidden\", true);\n    });\n  };\n\n  Tooltip.prototype.getItems = function (e) {\n    if (e.detail.items) {\n      return e.detail.items;\n    }\n\n    return [];\n  };\n\n  Tooltip.prototype.formatItems = function (items) {\n    var options = this.model.getOptions(); // get user provided custom values for truncation\n\n    var truncationType = Tools.getProperty(options, \"tooltip\", \"truncation\", \"type\");\n    var truncationThreshold = Tools.getProperty(options, \"tooltip\", \"truncation\", \"threshold\");\n    var truncationNumCharacter = Tools.getProperty(options, \"tooltip\", \"truncation\", \"numCharacter\"); // truncate the label if it's too long\n    // only applies to discrete type\n\n    if (truncationType !== TruncationTypes.NONE) {\n      return items.map(function (item) {\n        if (item.label && item.label.length > truncationThreshold) {\n          item.label = Tools.truncateLabel(item.label, truncationType, truncationNumCharacter);\n        }\n\n        if (item.value && item.value.length > truncationThreshold) {\n          item.value = Tools.truncateLabel(item.value, truncationType, truncationNumCharacter);\n        }\n\n        return item;\n      });\n    }\n\n    return items;\n  };\n\n  Tooltip.prototype.getTooltipHTML = function (e) {\n    var defaultHTML;\n\n    if (e.detail.content) {\n      defaultHTML = \"<div class=\\\"title-tooltip\\\">\" + e.detail.content + \"</div>\";\n    } else {\n      var items = this.getItems(e);\n      var formattedItems = this.formatItems(items);\n      defaultHTML = \"<ul class='multi-tooltip'>\" + formattedItems.map(function (item) {\n        return \"<li>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"datapoint-tooltip \" + (item.bold ? \"bold\" : \"\") + \"\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\" + (item.color ? '<a style=\"background-color: ' + item.color + '\" class=\"tooltip-color\"></a>' : \"\") + \"\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"label\\\">\" + item.label + \"</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"value\\\">\" + item.value + \"</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</li>\";\n      }).join(\"\") + \"</ul>\";\n    }\n\n    return defaultHTML;\n  };\n\n  Tooltip.prototype.valueFormatter = function (value) {\n    var options = this.model.getOptions();\n    var valueFormatter = Tools.getProperty(options, \"tooltip\", \"valueFormatter\");\n\n    if (valueFormatter) {\n      return valueFormatter(value);\n    }\n\n    return value.toLocaleString();\n  };\n\n  Tooltip.prototype.render = function () {\n    this.tooltip.classed(\"hidden\", true);\n  };\n\n  Tooltip.prototype.positionTooltip = function (e) {\n    var holder = this.services.domUtils.getHolder();\n    var target = this.tooltip.node();\n    var mouseRelativePos = Tools.getProperty(e, \"detail\", \"mousePosition\");\n\n    if (!mouseRelativePos) {\n      mouseRelativePos = mouse(holder);\n    }\n\n    var pos; // Find out whether tooltip should be shown on the left or right side\n\n    var bestPlacementOption = this.positionService.findBestPlacementAt({\n      left: mouseRelativePos[0],\n      top: mouseRelativePos[1]\n    }, target, [PLACEMENTS.RIGHT, PLACEMENTS.LEFT, PLACEMENTS.TOP, PLACEMENTS.BOTTOM], function () {\n      return {\n        width: holder.offsetWidth,\n        height: holder.offsetHeight\n      };\n    });\n    var horizontalOffset = this.model.getOptions().tooltip.horizontalOffset;\n\n    if (bestPlacementOption === PLACEMENTS.LEFT) {\n      horizontalOffset *= -1;\n    } // Get coordinates to where tooltip should be positioned\n\n\n    pos = this.positionService.findPositionAt({\n      left: mouseRelativePos[0] + horizontalOffset,\n      top: mouseRelativePos[1]\n    }, target, bestPlacementOption);\n    this.positionService.setElement(target, pos);\n  };\n\n  return Tooltip;\n}(Component);\n\nexport { Tooltip };","map":{"version":3,"sources":["/Users/nicholasrenotte/Desktop/Regression/app/client/node_modules/@carbon/charts/components/essentials/tooltip.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Component","Tools","DOMUtils","Position","PLACEMENTS","settings","select","mouse","Events","TruncationTypes","Tooltip","_super","model","services","configs","_this","call","type","positionService","init","holder","domUtils","getHolder","chartprefix","getProperty","getOptions","tooltip","appendOrSelect","prefix","tooltipTextContainer","style","events","addEventListener","MOVE","e","positionTooltip","SHOW","data","detail","defaultHTML","getTooltipHTML","html","customHTML","classed","HIDE","getItems","items","formatItems","options","truncationType","truncationThreshold","truncationNumCharacter","NONE","map","item","label","length","truncateLabel","value","content","formattedItems","bold","color","join","valueFormatter","toLocaleString","render","target","node","mouseRelativePos","pos","bestPlacementOption","findBestPlacementAt","left","top","RIGHT","LEFT","TOP","BOTTOM","width","offsetWidth","height","offsetHeight","horizontalOffset","findPositionAt","setElement"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Component } from \"../component\";\nimport { Tools } from \"../../tools\";\nimport { DOMUtils } from \"../../services\";\n// Carbon position service\nimport Position, { PLACEMENTS } from \"@carbon/utils-position\";\n// import the settings for the css prefix\nimport settings from \"carbon-components/es/globals/js/settings\";\n// D3 Imports\nimport { select, mouse } from \"d3-selection\";\nimport { Events, TruncationTypes } from \"../../interfaces\";\nvar Tooltip = /** @class */ (function (_super) {\n    __extends(Tooltip, _super);\n    function Tooltip(model, services, configs) {\n        var _this = _super.call(this, model, services, configs) || this;\n        _this.type = \"tooltip\";\n        _this.positionService = new Position();\n        _this.init();\n        return _this;\n    }\n    Tooltip.prototype.init = function () {\n        var _this = this;\n        // Grab the tooltip element\n        var holder = select(this.services.domUtils.getHolder());\n        var chartprefix = Tools.getProperty(this.model.getOptions(), \"style\", \"prefix\");\n        this.tooltip = DOMUtils.appendOrSelect(holder, \"div.\" + settings.prefix + \"--\" + chartprefix + \"--tooltip\");\n        // Apply html content to the tooltip\n        var tooltipTextContainer = DOMUtils.appendOrSelect(this.tooltip, \"div.content-box\");\n        this.tooltip.style(\"max-width\", null);\n        // listen to move-tooltip Custom Events to move the tooltip\n        this.services.events.addEventListener(Events.Tooltip.MOVE, function (e) {\n            _this.positionTooltip(e);\n        });\n        // listen to show-tooltip Custom Events to render the tooltip\n        this.services.events.addEventListener(Events.Tooltip.SHOW, function (e) {\n            var data = e.detail.data;\n            var defaultHTML = _this.getTooltipHTML(e);\n            // if there is a provided tooltip HTML function call it\n            if (Tools.getProperty(_this.model.getOptions(), \"tooltip\", \"customHTML\")) {\n                tooltipTextContainer.html(_this.model\n                    .getOptions()\n                    .tooltip.customHTML(data, defaultHTML));\n            }\n            else {\n                // Use default tooltip\n                tooltipTextContainer.html(defaultHTML);\n            }\n            // Position the tooltip\n            _this.positionTooltip(e);\n            // Fade in\n            _this.tooltip.classed(\"hidden\", false);\n        });\n        // listen to hide-tooltip Custom Events to hide the tooltip\n        this.services.events.addEventListener(Events.Tooltip.HIDE, function () {\n            _this.tooltip.classed(\"hidden\", true);\n        });\n    };\n    Tooltip.prototype.getItems = function (e) {\n        if (e.detail.items) {\n            return e.detail.items;\n        }\n        return [];\n    };\n    Tooltip.prototype.formatItems = function (items) {\n        var options = this.model.getOptions();\n        // get user provided custom values for truncation\n        var truncationType = Tools.getProperty(options, \"tooltip\", \"truncation\", \"type\");\n        var truncationThreshold = Tools.getProperty(options, \"tooltip\", \"truncation\", \"threshold\");\n        var truncationNumCharacter = Tools.getProperty(options, \"tooltip\", \"truncation\", \"numCharacter\");\n        // truncate the label if it's too long\n        // only applies to discrete type\n        if (truncationType !== TruncationTypes.NONE) {\n            return items.map(function (item) {\n                if (item.label && item.label.length > truncationThreshold) {\n                    item.label = Tools.truncateLabel(item.label, truncationType, truncationNumCharacter);\n                }\n                if (item.value && item.value.length > truncationThreshold) {\n                    item.value = Tools.truncateLabel(item.value, truncationType, truncationNumCharacter);\n                }\n                return item;\n            });\n        }\n        return items;\n    };\n    Tooltip.prototype.getTooltipHTML = function (e) {\n        var defaultHTML;\n        if (e.detail.content) {\n            defaultHTML = \"<div class=\\\"title-tooltip\\\">\" + e.detail.content + \"</div>\";\n        }\n        else {\n            var items = this.getItems(e);\n            var formattedItems = this.formatItems(items);\n            defaultHTML =\n                \"<ul class='multi-tooltip'>\" +\n                    formattedItems\n                        .map(function (item) {\n                        return \"<li>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"datapoint-tooltip \" + (item.bold ? \"bold\" : \"\") + \"\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\" + (item.color\n                            ? '<a style=\"background-color: ' +\n                                item.color +\n                                '\" class=\"tooltip-color\"></a>'\n                            : \"\") + \"\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"label\\\">\" + item.label + \"</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"value\\\">\" + item.value + \"</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</li>\";\n                    })\n                        .join(\"\") +\n                    \"</ul>\";\n        }\n        return defaultHTML;\n    };\n    Tooltip.prototype.valueFormatter = function (value) {\n        var options = this.model.getOptions();\n        var valueFormatter = Tools.getProperty(options, \"tooltip\", \"valueFormatter\");\n        if (valueFormatter) {\n            return valueFormatter(value);\n        }\n        return value.toLocaleString();\n    };\n    Tooltip.prototype.render = function () {\n        this.tooltip.classed(\"hidden\", true);\n    };\n    Tooltip.prototype.positionTooltip = function (e) {\n        var holder = this.services.domUtils.getHolder();\n        var target = this.tooltip.node();\n        var mouseRelativePos = Tools.getProperty(e, \"detail\", \"mousePosition\");\n        if (!mouseRelativePos) {\n            mouseRelativePos = mouse(holder);\n        }\n        var pos;\n        // Find out whether tooltip should be shown on the left or right side\n        var bestPlacementOption = this.positionService.findBestPlacementAt({\n            left: mouseRelativePos[0],\n            top: mouseRelativePos[1]\n        }, target, [\n            PLACEMENTS.RIGHT,\n            PLACEMENTS.LEFT,\n            PLACEMENTS.TOP,\n            PLACEMENTS.BOTTOM\n        ], function () { return ({\n            width: holder.offsetWidth,\n            height: holder.offsetHeight\n        }); });\n        var horizontalOffset = this.model.getOptions().tooltip.horizontalOffset;\n        if (bestPlacementOption === PLACEMENTS.LEFT) {\n            horizontalOffset *= -1;\n        }\n        // Get coordinates to where tooltip should be positioned\n        pos = this.positionService.findPositionAt({\n            left: mouseRelativePos[0] + horizontalOffset,\n            top: mouseRelativePos[1]\n        }, target, bestPlacementOption);\n        this.positionService.setElement(target, pos);\n    };\n    return Tooltip;\n}(Component));\nexport { Tooltip };\n//# sourceMappingURL=../../../src/components/essentials/tooltip.js.map"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}(); // Internal Imports\n\n\nimport { Component } from \"../component\";\nimport { DOMUtils } from \"../../services\";\nimport { Events, Roles } from \"../../interfaces\";\nimport { Tools } from \"../../tools\";\nimport { radialLabelPlacement, radToDeg, polarToCartesianCoords, distanceBetweenPointOnCircAndVerticalDiameter } from \"../../services/angle-utils\"; // D3 Imports\n\nimport { select } from \"d3-selection\";\nimport { scaleBand, scaleLinear } from \"d3-scale\";\nimport { max, extent } from \"d3-array\";\nimport { lineRadial, curveLinearClosed } from \"d3-shape\"; // used to make transitions\n\nvar oldYScale;\n\nvar Radar =\n/** @class */\nfunction (_super) {\n  __extends(Radar, _super);\n\n  function Radar() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = \"radar\"; // append temporarily the label to get the exact space that it occupies\n\n    _this.getLabelDimensions = function (label) {\n      var tmpTick = DOMUtils.appendOrSelect(_this.getContainerSVG(), \"g.tmp-tick\");\n      var tmpTickText = DOMUtils.appendOrSelect(tmpTick, \"text\").text(label);\n\n      var _a = DOMUtils.getSVGElementSize(tmpTickText.node(), {\n        useBBox: true\n      }),\n          width = _a.width,\n          height = _a.height;\n\n      tmpTick.remove();\n      return {\n        width: width,\n        height: height\n      };\n    }; // Given a flat array of objects, if there are missing data on key,\n    // creates corresponding data with value = null\n\n\n    _this.normalizeFlatData = function (dataset) {\n      var options = _this.model.getOptions();\n\n      var _a = Tools.getProperty(options, \"radar\", \"axes\"),\n          angle = _a.angle,\n          value = _a.value;\n\n      var groupMapsTo = Tools.getProperty(options, \"data\", \"groupMapsTo\");\n      var completeBlankData = Tools.flatMapDeep(_this.uniqueKeys.map(function (key) {\n        return _this.uniqueGroups.map(function (group) {\n          var _a;\n\n          return _a = {}, _a[angle] = key, _a[groupMapsTo] = group, _a[value] = null, _a;\n        });\n      }));\n      return Tools.merge(completeBlankData, dataset);\n    }; // Given a a grouped array of objects, if there are missing data on key,\n    // creates corresponding data with value = null\n\n\n    _this.normalizeGroupedData = function (dataset) {\n      var options = _this.model.getOptions();\n\n      var _a = Tools.getProperty(options, \"radar\", \"axes\"),\n          angle = _a.angle,\n          value = _a.value;\n\n      var groupMapsTo = Tools.getProperty(options, \"data\", \"groupMapsTo\");\n      return dataset.map(function (_a) {\n        var name = _a.name,\n            data = _a.data;\n\n        var completeBlankData = _this.uniqueKeys.map(function (k) {\n          var _a;\n\n          return _a = {}, _a[groupMapsTo] = name, _a[angle] = k, _a[value] = null, _a;\n        });\n\n        return {\n          name: name,\n          data: Tools.merge(completeBlankData, data)\n        };\n      });\n    };\n\n    _this.handleLegendOnHover = function (event) {\n      var hoveredElement = event.detail.hoveredElement;\n      var opacity = Tools.getProperty(_this.model.getOptions(), \"radar\", \"opacity\");\n\n      _this.parent.selectAll(\"g.blobs path\").transition(_this.services.transitions.getTransition(\"legend-hover-blob\")).style(\"fill-opacity\", function (group) {\n        if (group.name !== hoveredElement.datum().name) {\n          return Tools.getProperty(opacity, \"unselected\");\n        }\n\n        return Tools.getProperty(opacity, \"selected\");\n      });\n    };\n\n    _this.handleLegendMouseOut = function (event) {\n      var opacity = Tools.getProperty(_this.model.getOptions(), \"radar\", \"opacity\");\n\n      _this.parent.selectAll(\"g.blobs path\").transition(_this.services.transitions.getTransition(\"legend-mouseout-blob\")).style(\"fill-opacity\", Tools.getProperty(opacity, \"selected\"));\n    };\n\n    return _this;\n  }\n\n  Radar.prototype.init = function () {\n    var events = this.services.events; // Highlight correct line legend item hovers\n\n    events.addEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover); // Un-highlight lines on legend item mouseouts\n\n    events.addEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n  };\n\n  Radar.prototype.render = function (animate) {\n    var _this = this;\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var svg = this.getContainerSVG();\n\n    var _a = DOMUtils.getSVGElementSize(this.parent, {\n      useAttrs: true\n    }),\n        width = _a.width,\n        height = _a.height;\n\n    var data = this.model.getData();\n    var displayData = this.model.getDisplayData();\n    var groupedData = this.model.getGroupedData();\n    var options = this.model.getOptions();\n\n    var _b = Tools.getProperty(options, \"radar\", \"axes\"),\n        angle = _b.angle,\n        value = _b.value;\n\n    var groupMapsTo = Tools.getProperty(options, \"data\", \"groupMapsTo\");\n\n    var _c = Tools.getProperty(options, \"radar\"),\n        xLabelPadding = _c.xLabelPadding,\n        yLabelPadding = _c.yLabelPadding,\n        yTicksNumber = _c.yTicksNumber,\n        minRange = _c.minRange,\n        xAxisRectHeight = _c.xAxisRectHeight,\n        opacity = _c.opacity;\n\n    this.uniqueKeys = Array.from(new Set(data.map(function (d) {\n      return d[angle];\n    })));\n    this.uniqueGroups = Array.from(new Set(data.map(function (d) {\n      return d[groupMapsTo];\n    })));\n    this.displayDataNormalized = this.normalizeFlatData(displayData);\n    this.groupedDataNormalized = this.normalizeGroupedData(groupedData);\n    var labelHeight = this.getLabelDimensions(this.uniqueKeys[0]).height;\n    var margin = 2 * (labelHeight + yLabelPadding);\n    var size = Math.min(width, height);\n    var diameter = size - margin;\n    var radius = diameter / 2;\n\n    if (radius <= 0) {\n      return;\n    } // given a key, return the corresponding angle in radiants\n    // rotated by -PI/2 because we want angle 0° at -y (12 o’clock)\n\n\n    var xScale = scaleBand().domain(this.displayDataNormalized.map(function (d) {\n      return d[angle];\n    })).range([0, 2 * Math.PI].map(function (a) {\n      return a - Math.PI / 2;\n    }));\n    var yScale = scaleLinear().domain([0, max(this.displayDataNormalized.map(function (d) {\n      return d[value];\n    }))]).range([minRange, radius]).nice(yTicksNumber);\n    var yTicks = yScale.ticks(yTicksNumber);\n\n    var colorScale = function (group) {\n      return _this.model.getFillColor(group);\n    }; // constructs a new radial line generator\n    // the angle accessor returns the angle in radians with 0° at -y (12 o’clock)\n    // so map back the angle\n\n\n    var radialLineGenerator = lineRadial().angle(function (d) {\n      return xScale(d[angle]) + Math.PI / 2;\n    }).radius(function (d) {\n      return yScale(d[value]);\n    }).curve(curveLinearClosed); // this line generator is necessary in order to make a transition of a value from the\n    // position it occupies using the old scale to the position it occupies using the new scale\n\n    var oldRadialLineGenerator = lineRadial().angle(radialLineGenerator.angle()).radius(function (d) {\n      return oldYScale ? oldYScale(d[value]) : minRange;\n    }).curve(radialLineGenerator.curve()); // compute the space that each x label needs\n\n    var horizSpaceNeededByEachXLabel = this.uniqueKeys.map(function (key) {\n      var tickWidth = _this.getLabelDimensions(key).width; // compute the distance between the point that the label rapresents and the vertical diameter\n\n\n      var distanceFromDiameter = distanceBetweenPointOnCircAndVerticalDiameter(xScale(key), radius); // the space each label occupies is the sum of these two values\n\n      return tickWidth + distanceFromDiameter;\n    });\n    var leftPadding = max(horizSpaceNeededByEachXLabel); // center coordinates\n\n    var c = {\n      x: leftPadding + xLabelPadding,\n      y: height / 2\n    }; /////////////////////////////\n    // Drawing the radar\n    /////////////////////////////\n    // y axes\n\n    var yAxes = DOMUtils.appendOrSelect(svg, \"g.y-axes\").attr(\"role\", Roles.GROUP);\n    var yAxisUpdate = yAxes.selectAll(\"path\").data(yTicks, function (tick) {\n      return tick;\n    }); // for each tick, create array of data corresponding to the points composing the shape\n\n    var shapeData = function (tick) {\n      return _this.uniqueKeys.map(function (key) {\n        var _a;\n\n        return _a = {}, _a[angle] = key, _a[value] = tick, _a;\n      });\n    };\n\n    yAxisUpdate.join(function (enter) {\n      return enter.append(\"path\").attr(\"role\", Roles.GRAPHICS_SYMBOL).attr(\"opacity\", 0).attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\").attr(\"fill\", \"none\").attr(\"d\", function (tick) {\n        return oldRadialLineGenerator(shapeData(tick));\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_y_axes_enter\", animate)).attr(\"opacity\", 1).attr(\"d\", function (tick) {\n          return radialLineGenerator(shapeData(tick));\n        });\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_y_axes_update\", animate)).attr(\"opacity\", 1).attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\").attr(\"d\", function (tick) {\n          return radialLineGenerator(shapeData(tick));\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_y_axes_exit\", animate)).attr(\"d\", function (tick) {\n          return radialLineGenerator(shapeData(tick));\n        }).attr(\"opacity\", 0).remove();\n      });\n    }); // y labels (show only the min and the max labels)\n\n    var yLabels = DOMUtils.appendOrSelect(svg, \"g.y-labels\").attr(\"role\", Roles.GROUP);\n    var yLabelUpdate = yLabels.selectAll(\"text\").data(extent(yTicks));\n    yLabelUpdate.join(function (enter) {\n      return enter.append(\"text\").attr(\"opacity\", 0).text(function (tick) {\n        return tick;\n      }).attr(\"x\", function (tick) {\n        return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n      }).attr(\"y\", function (tick) {\n        return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n      }).style(\"text-anchor\", \"start\").style(\"dominant-baseline\", \"middle\").call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_y_labels_enter\", animate)).attr(\"opacity\", 1);\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_y_labels_update\", animate)).text(function (tick) {\n          return tick;\n        }).attr(\"opacity\", 1).attr(\"x\", function (tick) {\n          return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n        }).attr(\"y\", function (tick) {\n          return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_y_labels_exit\", animate)).attr(\"opacity\", 0).remove();\n      });\n    }); // x axes\n\n    var xAxes = DOMUtils.appendOrSelect(svg, \"g.x-axes\").attr(\"role\", Roles.GROUP);\n    var xAxisUpdate = xAxes.selectAll(\"line\").data(this.uniqueKeys, function (key) {\n      return key;\n    });\n    xAxisUpdate.join(function (enter) {\n      return enter.append(\"line\").attr(\"role\", Roles.GRAPHICS_SYMBOL).attr(\"opacity\", 0).attr(\"class\", function (key) {\n        return \"x-axis-\" + Tools.kebabCase(key);\n      }) // replace spaces with -\n      .attr(\"stroke-dasharray\", \"0\").attr(\"x1\", function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).x;\n      }).attr(\"y1\", function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).y;\n      }).attr(\"x2\", function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).x;\n      }).attr(\"y2\", function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).y;\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_x_axes_enter\", animate)).attr(\"opacity\", 1).attr(\"x1\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n        }).attr(\"y1\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n        }).attr(\"x2\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n        }).attr(\"y2\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n        });\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_x_axes_update\", animate)).attr(\"opacity\", 1).attr(\"x1\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n        }).attr(\"y1\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n        }).attr(\"x2\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n        }).attr(\"y2\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_x_axes_exit\", animate)).attr(\"opacity\", 0).remove();\n      });\n    }); // x labels\n\n    var xLabels = DOMUtils.appendOrSelect(svg, \"g.x-labels\").attr(\"role\", Roles.GROUP);\n    var xLabelUpdate = xLabels.selectAll(\"text\").data(this.uniqueKeys);\n    xLabelUpdate.join(function (enter) {\n      return enter.append(\"text\").text(function (key) {\n        return key;\n      }).attr(\"opacity\", 0).attr(\"x\", function (key) {\n        return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n      }).attr(\"y\", function (key) {\n        return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n      }).style(\"text-anchor\", function (key) {\n        return radialLabelPlacement(xScale(key)).textAnchor;\n      }).style(\"dominant-baseline\", function (key) {\n        return radialLabelPlacement(xScale(key)).dominantBaseline;\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_x_labels_enter\", animate)).attr(\"opacity\", 1);\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_x_labels_update\", animate)).attr(\"opacity\", 1).attr(\"x\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n        }).attr(\"y\", function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_x_labels_exit\", animate)).attr(\"opacity\", 0).remove();\n      });\n    }); // blobs\n\n    var blobs = DOMUtils.appendOrSelect(svg, \"g.blobs\").attr(\"role\", Roles.GROUP);\n    var blobUpdate = blobs.selectAll(\"path\").data(this.groupedDataNormalized, function (group) {\n      return group.name;\n    });\n    blobUpdate.join(function (enter) {\n      return enter.append(\"path\").attr(\"class\", \"blob\").attr(\"role\", Roles.GRAPHICS_SYMBOL).attr(\"opacity\", 0).attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\").attr(\"fill\", function (group) {\n        return colorScale(group.name);\n      }).style(\"fill-opacity\", opacity.selected).attr(\"stroke\", function (group) {\n        return colorScale(group.name);\n      }).attr(\"d\", function (group) {\n        return oldRadialLineGenerator(group.data);\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_blobs_enter\", animate)).attr(\"opacity\", 1).attr(\"d\", function (group) {\n          return radialLineGenerator(group.data);\n        });\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_blobs_update\", animate)).attr(\"opacity\", 1).attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\").attr(\"d\", function (group) {\n          return radialLineGenerator(group.data);\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition(\"radar_blobs_exit\", animate)).attr(\"d\", function (group) {\n          return radialLineGenerator(group.data);\n        }).attr(\"opacity\", 0).remove();\n      });\n    }); // data dots\n\n    var dots = DOMUtils.appendOrSelect(svg, \"g.dots\").attr(\"role\", Roles.GROUP);\n    var dotsUpdate = dots.selectAll(\"circle\").data(this.displayDataNormalized);\n    dotsUpdate.join(function (enter) {\n      return enter.append(\"circle\").attr(\"role\", Roles.GRAPHICS_SYMBOL);\n    }, function (update) {\n      return update;\n    }, function (exit) {\n      return exit.remove();\n    }).attr(\"class\", function (d) {\n      return Tools.kebabCase(d[angle]);\n    }).attr(\"cx\", function (d) {\n      return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).x;\n    }).attr(\"cy\", function (d) {\n      return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).y;\n    }).attr(\"r\", 0).attr(\"opacity\", 0).attr(\"fill\", function (d) {\n      return colorScale(d[groupMapsTo]);\n    }); // rectangles\n\n    var xAxesRect = DOMUtils.appendOrSelect(svg, \"g.x-axes-rect\").attr(\"role\", Roles.GROUP);\n    var xAxisRectUpdate = xAxesRect.selectAll(\"rect\").data(this.uniqueKeys);\n    xAxisRectUpdate.join(function (enter) {\n      return enter.append(\"rect\").attr(\"role\", Roles.GRAPHICS_SYMBOL);\n    }, function (update) {\n      return update;\n    }, function (exit) {\n      return exit.remove();\n    }).attr(\"x\", c.x).attr(\"y\", c.y - xAxisRectHeight / 2).attr(\"width\", yScale.range()[1]).attr(\"height\", xAxisRectHeight).attr(\"fill\", \"red\").style(\"fill-opacity\", 0).attr(\"transform\", function (key) {\n      return \"rotate(\" + radToDeg(xScale(key)) + \", \" + c.x + \", \" + c.y + \")\";\n    });\n    var alignment = Tools.getProperty(options, \"radar\", \"alignment\");\n    var alignmentOffset = DOMUtils.getAlignmentOffset(alignment, svg, this.getParent());\n    svg.attr(\"transform\", \"translate(\" + alignmentOffset + \", 0)\"); // Add event listeners\n\n    this.addEventListeners();\n    oldYScale = yScale; // save the current scale as the old one\n  };\n\n  Radar.prototype.destroy = function () {\n    // Remove event listeners\n    this.parent.selectAll(\".x-axes-rect > rect\").on(\"mouseover\", null).on(\"mousemove\", null).on(\"mouseout\", null); // Remove legend listeners\n\n    var eventsFragment = this.services.events;\n    eventsFragment.removeEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n    eventsFragment.removeEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n  };\n\n  Radar.prototype.addEventListeners = function () {\n    var self = this;\n\n    var _a = Tools.getProperty(this.model.getOptions(), \"radar\"),\n        angle = _a.axes.angle,\n        dotsRadius = _a.dotsRadius; // events on x axes rects\n\n\n    this.parent.selectAll(\".x-axes-rect > rect\").on(\"mouseover\", function (datum) {\n      var hoveredElement = select(this); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOVER, {\n        element: hoveredElement,\n        datum: datum\n      });\n      var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n      var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum)); // Change style\n\n      axisLine.classed(\"hovered\", true).attr(\"stroke-dasharray\", \"4 4\");\n      dots.classed(\"hovered\", true).attr(\"opacity\", 1).attr(\"r\", dotsRadius); // get the items that should be highlighted\n\n      var itemsToHighlight = self.displayDataNormalized.filter(function (d) {\n        return d[angle] === datum;\n      });\n      var options = self.model.getOptions();\n      var groupMapsTo = options.data.groupMapsTo;\n      var valueMapsTo = Tools.getProperty(options, \"radar\", \"axes\", \"value\"); // Show tooltip\n\n      self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n        hoveredElement: hoveredElement,\n        items: itemsToHighlight.filter(function (datum) {\n          return typeof datum[valueMapsTo] === \"number\";\n        }).map(function (datum) {\n          return {\n            label: datum[groupMapsTo],\n            value: datum[valueMapsTo],\n            color: self.model.getStrokeColor(datum[groupMapsTo])\n          };\n        })\n      });\n    }).on(\"mousemove\", function (datum) {\n      var hoveredElement = select(this); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEMOVE, {\n        element: hoveredElement,\n        datum: datum\n      });\n      self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n    }).on(\"click\", function (datum) {\n      // Dispatch mouse event\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_CLICK, {\n        element: select(this),\n        datum: datum\n      });\n    }).on(\"mouseout\", function (datum) {\n      var hoveredElement = select(this);\n      var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n      var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum)); // Change style\n\n      axisLine.classed(\"hovered\", false).attr(\"stroke-dasharray\", \"0\");\n      dots.classed(\"hovered\", false).attr(\"opacity\", 0).attr(\"r\", 0); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOUT, {\n        element: hoveredElement,\n        datum: datum\n      }); // Hide tooltip\n\n      self.services.events.dispatchEvent(Events.Tooltip.HIDE);\n    });\n  };\n\n  return Radar;\n}(Component);\n\nexport { Radar };","map":{"version":3,"sources":["/Users/nicholasrenotte/Desktop/Regression/app/client/node_modules/@carbon/charts/components/graphs/radar.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Component","DOMUtils","Events","Roles","Tools","radialLabelPlacement","radToDeg","polarToCartesianCoords","distanceBetweenPointOnCircAndVerticalDiameter","select","scaleBand","scaleLinear","max","extent","lineRadial","curveLinearClosed","oldYScale","Radar","_super","_this","apply","arguments","type","getLabelDimensions","label","tmpTick","appendOrSelect","getContainerSVG","tmpTickText","text","_a","getSVGElementSize","node","useBBox","width","height","remove","normalizeFlatData","dataset","options","model","getOptions","getProperty","angle","value","groupMapsTo","completeBlankData","flatMapDeep","uniqueKeys","map","key","uniqueGroups","group","merge","normalizeGroupedData","name","data","k","handleLegendOnHover","event","hoveredElement","detail","opacity","parent","selectAll","transition","services","transitions","getTransition","style","datum","handleLegendMouseOut","init","events","addEventListener","Legend","ITEM_HOVER","ITEM_MOUSEOUT","render","animate","svg","useAttrs","getData","displayData","getDisplayData","groupedData","getGroupedData","_b","_c","xLabelPadding","yLabelPadding","yTicksNumber","minRange","xAxisRectHeight","from","Set","displayDataNormalized","groupedDataNormalized","labelHeight","margin","size","Math","min","diameter","radius","xScale","domain","range","PI","a","yScale","nice","yTicks","ticks","colorScale","getFillColor","radialLineGenerator","curve","oldRadialLineGenerator","horizSpaceNeededByEachXLabel","tickWidth","distanceFromDiameter","leftPadding","c","x","y","yAxes","attr","GROUP","yAxisUpdate","tick","shapeData","join","enter","append","GRAPHICS_SYMBOL","call","selection","update","exit","yLabels","yLabelUpdate","xAxes","xAxisUpdate","kebabCase","xLabels","xLabelUpdate","textAnchor","dominantBaseline","blobs","blobUpdate","selected","dots","dotsUpdate","xAxesRect","xAxisRectUpdate","alignment","alignmentOffset","getAlignmentOffset","getParent","addEventListeners","destroy","on","eventsFragment","removeEventListener","self","axes","dotsRadius","dispatchEvent","X_AXIS_MOUSEOVER","element","axisLine","classed","itemsToHighlight","filter","valueMapsTo","Tooltip","SHOW","items","color","getStrokeColor","X_AXIS_MOUSEMOVE","MOVE","X_AXIS_CLICK","X_AXIS_MOUSEOUT","HIDE"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// Internal Imports\nimport { Component } from \"../component\";\nimport { DOMUtils } from \"../../services\";\nimport { Events, Roles } from \"../../interfaces\";\nimport { Tools } from \"../../tools\";\nimport { radialLabelPlacement, radToDeg, polarToCartesianCoords, distanceBetweenPointOnCircAndVerticalDiameter } from \"../../services/angle-utils\";\n// D3 Imports\nimport { select } from \"d3-selection\";\nimport { scaleBand, scaleLinear } from \"d3-scale\";\nimport { max, extent } from \"d3-array\";\nimport { lineRadial, curveLinearClosed } from \"d3-shape\";\n// used to make transitions\nvar oldYScale;\nvar Radar = /** @class */ (function (_super) {\n    __extends(Radar, _super);\n    function Radar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = \"radar\";\n        // append temporarily the label to get the exact space that it occupies\n        _this.getLabelDimensions = function (label) {\n            var tmpTick = DOMUtils.appendOrSelect(_this.getContainerSVG(), \"g.tmp-tick\");\n            var tmpTickText = DOMUtils.appendOrSelect(tmpTick, \"text\").text(label);\n            var _a = DOMUtils.getSVGElementSize(tmpTickText.node(), { useBBox: true }), width = _a.width, height = _a.height;\n            tmpTick.remove();\n            return { width: width, height: height };\n        };\n        // Given a flat array of objects, if there are missing data on key,\n        // creates corresponding data with value = null\n        _this.normalizeFlatData = function (dataset) {\n            var options = _this.model.getOptions();\n            var _a = Tools.getProperty(options, \"radar\", \"axes\"), angle = _a.angle, value = _a.value;\n            var groupMapsTo = Tools.getProperty(options, \"data\", \"groupMapsTo\");\n            var completeBlankData = Tools.flatMapDeep(_this.uniqueKeys.map(function (key) {\n                return _this.uniqueGroups.map(function (group) {\n                    var _a;\n                    return (_a = {},\n                        _a[angle] = key,\n                        _a[groupMapsTo] = group,\n                        _a[value] = null,\n                        _a);\n                });\n            }));\n            return Tools.merge(completeBlankData, dataset);\n        };\n        // Given a a grouped array of objects, if there are missing data on key,\n        // creates corresponding data with value = null\n        _this.normalizeGroupedData = function (dataset) {\n            var options = _this.model.getOptions();\n            var _a = Tools.getProperty(options, \"radar\", \"axes\"), angle = _a.angle, value = _a.value;\n            var groupMapsTo = Tools.getProperty(options, \"data\", \"groupMapsTo\");\n            return dataset.map(function (_a) {\n                var name = _a.name, data = _a.data;\n                var completeBlankData = _this.uniqueKeys.map(function (k) {\n                    var _a;\n                    return (_a = {},\n                        _a[groupMapsTo] = name,\n                        _a[angle] = k,\n                        _a[value] = null,\n                        _a);\n                });\n                return { name: name, data: Tools.merge(completeBlankData, data) };\n            });\n        };\n        _this.handleLegendOnHover = function (event) {\n            var hoveredElement = event.detail.hoveredElement;\n            var opacity = Tools.getProperty(_this.model.getOptions(), \"radar\", \"opacity\");\n            _this.parent\n                .selectAll(\"g.blobs path\")\n                .transition(_this.services.transitions.getTransition(\"legend-hover-blob\"))\n                .style(\"fill-opacity\", function (group) {\n                if (group.name !== hoveredElement.datum().name) {\n                    return Tools.getProperty(opacity, \"unselected\");\n                }\n                return Tools.getProperty(opacity, \"selected\");\n            });\n        };\n        _this.handleLegendMouseOut = function (event) {\n            var opacity = Tools.getProperty(_this.model.getOptions(), \"radar\", \"opacity\");\n            _this.parent\n                .selectAll(\"g.blobs path\")\n                .transition(_this.services.transitions.getTransition(\"legend-mouseout-blob\"))\n                .style(\"fill-opacity\", Tools.getProperty(opacity, \"selected\"));\n        };\n        return _this;\n    }\n    Radar.prototype.init = function () {\n        var events = this.services.events;\n        // Highlight correct line legend item hovers\n        events.addEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n        // Un-highlight lines on legend item mouseouts\n        events.addEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n    };\n    Radar.prototype.render = function (animate) {\n        var _this = this;\n        if (animate === void 0) { animate = true; }\n        var svg = this.getContainerSVG();\n        var _a = DOMUtils.getSVGElementSize(this.parent, {\n            useAttrs: true\n        }), width = _a.width, height = _a.height;\n        var data = this.model.getData();\n        var displayData = this.model.getDisplayData();\n        var groupedData = this.model.getGroupedData();\n        var options = this.model.getOptions();\n        var _b = Tools.getProperty(options, \"radar\", \"axes\"), angle = _b.angle, value = _b.value;\n        var groupMapsTo = Tools.getProperty(options, \"data\", \"groupMapsTo\");\n        var _c = Tools.getProperty(options, \"radar\"), xLabelPadding = _c.xLabelPadding, yLabelPadding = _c.yLabelPadding, yTicksNumber = _c.yTicksNumber, minRange = _c.minRange, xAxisRectHeight = _c.xAxisRectHeight, opacity = _c.opacity;\n        this.uniqueKeys = Array.from(new Set(data.map(function (d) { return d[angle]; })));\n        this.uniqueGroups = Array.from(new Set(data.map(function (d) { return d[groupMapsTo]; })));\n        this.displayDataNormalized = this.normalizeFlatData(displayData);\n        this.groupedDataNormalized = this.normalizeGroupedData(groupedData);\n        var labelHeight = this.getLabelDimensions(this.uniqueKeys[0]).height;\n        var margin = 2 * (labelHeight + yLabelPadding);\n        var size = Math.min(width, height);\n        var diameter = size - margin;\n        var radius = diameter / 2;\n        if (radius <= 0) {\n            return;\n        }\n        // given a key, return the corresponding angle in radiants\n        // rotated by -PI/2 because we want angle 0° at -y (12 o’clock)\n        var xScale = scaleBand()\n            .domain(this.displayDataNormalized.map(function (d) { return d[angle]; }))\n            .range([0, 2 * Math.PI].map(function (a) { return a - Math.PI / 2; }));\n        var yScale = scaleLinear()\n            .domain([\n            0,\n            max(this.displayDataNormalized.map(function (d) { return d[value]; }))\n        ])\n            .range([minRange, radius])\n            .nice(yTicksNumber);\n        var yTicks = yScale.ticks(yTicksNumber);\n        var colorScale = function (group) {\n            return _this.model.getFillColor(group);\n        };\n        // constructs a new radial line generator\n        // the angle accessor returns the angle in radians with 0° at -y (12 o’clock)\n        // so map back the angle\n        var radialLineGenerator = lineRadial()\n            .angle(function (d) { return xScale(d[angle]) + Math.PI / 2; })\n            .radius(function (d) { return yScale(d[value]); })\n            .curve(curveLinearClosed);\n        // this line generator is necessary in order to make a transition of a value from the\n        // position it occupies using the old scale to the position it occupies using the new scale\n        var oldRadialLineGenerator = lineRadial()\n            .angle(radialLineGenerator.angle())\n            .radius(function (d) { return (oldYScale ? oldYScale(d[value]) : minRange); })\n            .curve(radialLineGenerator.curve());\n        // compute the space that each x label needs\n        var horizSpaceNeededByEachXLabel = this.uniqueKeys.map(function (key) {\n            var tickWidth = _this.getLabelDimensions(key).width;\n            // compute the distance between the point that the label rapresents and the vertical diameter\n            var distanceFromDiameter = distanceBetweenPointOnCircAndVerticalDiameter(xScale(key), radius);\n            // the space each label occupies is the sum of these two values\n            return tickWidth + distanceFromDiameter;\n        });\n        var leftPadding = max(horizSpaceNeededByEachXLabel);\n        // center coordinates\n        var c = {\n            x: leftPadding + xLabelPadding,\n            y: height / 2\n        };\n        /////////////////////////////\n        // Drawing the radar\n        /////////////////////////////\n        // y axes\n        var yAxes = DOMUtils.appendOrSelect(svg, \"g.y-axes\").attr(\"role\", Roles.GROUP);\n        var yAxisUpdate = yAxes\n            .selectAll(\"path\")\n            .data(yTicks, function (tick) { return tick; });\n        // for each tick, create array of data corresponding to the points composing the shape\n        var shapeData = function (tick) {\n            return _this.uniqueKeys.map(function (key) {\n                var _a;\n                return (_a = {}, _a[angle] = key, _a[value] = tick, _a);\n            });\n        };\n        yAxisUpdate.join(function (enter) {\n            return enter\n                .append(\"path\")\n                .attr(\"role\", Roles.GRAPHICS_SYMBOL)\n                .attr(\"opacity\", 0)\n                .attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\")\n                .attr(\"fill\", \"none\")\n                .attr(\"d\", function (tick) {\n                return oldRadialLineGenerator(shapeData(tick));\n            })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_y_axes_enter\", animate))\n                    .attr(\"opacity\", 1)\n                    .attr(\"d\", function (tick) {\n                    return radialLineGenerator(shapeData(tick));\n                });\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_y_axes_update\", animate))\n                    .attr(\"opacity\", 1)\n                    .attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\")\n                    .attr(\"d\", function (tick) {\n                    return radialLineGenerator(shapeData(tick));\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_y_axes_exit\", animate))\n                    .attr(\"d\", function (tick) {\n                    return radialLineGenerator(shapeData(tick));\n                })\n                    .attr(\"opacity\", 0)\n                    .remove();\n            });\n        });\n        // y labels (show only the min and the max labels)\n        var yLabels = DOMUtils.appendOrSelect(svg, \"g.y-labels\").attr(\"role\", Roles.GROUP);\n        var yLabelUpdate = yLabels.selectAll(\"text\").data(extent(yTicks));\n        yLabelUpdate.join(function (enter) {\n            return enter\n                .append(\"text\")\n                .attr(\"opacity\", 0)\n                .text(function (tick) { return tick; })\n                .attr(\"x\", function (tick) {\n                return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n            })\n                .attr(\"y\", function (tick) {\n                return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n            })\n                .style(\"text-anchor\", \"start\")\n                .style(\"dominant-baseline\", \"middle\")\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_y_labels_enter\", animate))\n                    .attr(\"opacity\", 1);\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_y_labels_update\", animate))\n                    .text(function (tick) { return tick; })\n                    .attr(\"opacity\", 1)\n                    .attr(\"x\", function (tick) {\n                    return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n                })\n                    .attr(\"y\", function (tick) {\n                    return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_y_labels_exit\", animate))\n                    .attr(\"opacity\", 0)\n                    .remove();\n            });\n        });\n        // x axes\n        var xAxes = DOMUtils.appendOrSelect(svg, \"g.x-axes\").attr(\"role\", Roles.GROUP);\n        var xAxisUpdate = xAxes\n            .selectAll(\"line\")\n            .data(this.uniqueKeys, function (key) { return key; });\n        xAxisUpdate.join(function (enter) {\n            return enter\n                .append(\"line\")\n                .attr(\"role\", Roles.GRAPHICS_SYMBOL)\n                .attr(\"opacity\", 0)\n                .attr(\"class\", function (key) { return \"x-axis-\" + Tools.kebabCase(key); }) // replace spaces with -\n                .attr(\"stroke-dasharray\", \"0\")\n                .attr(\"x1\", function (key) { return polarToCartesianCoords(xScale(key), 0, c).x; })\n                .attr(\"y1\", function (key) { return polarToCartesianCoords(xScale(key), 0, c).y; })\n                .attr(\"x2\", function (key) { return polarToCartesianCoords(xScale(key), 0, c).x; })\n                .attr(\"y2\", function (key) { return polarToCartesianCoords(xScale(key), 0, c).y; })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_x_axes_enter\", animate))\n                    .attr(\"opacity\", 1)\n                    .attr(\"x1\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n                })\n                    .attr(\"y1\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n                })\n                    .attr(\"x2\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n                })\n                    .attr(\"y2\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n                });\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_x_axes_update\", animate))\n                    .attr(\"opacity\", 1)\n                    .attr(\"x1\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n                })\n                    .attr(\"y1\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n                })\n                    .attr(\"x2\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n                })\n                    .attr(\"y2\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_x_axes_exit\", animate))\n                    .attr(\"opacity\", 0)\n                    .remove();\n            });\n        });\n        // x labels\n        var xLabels = DOMUtils.appendOrSelect(svg, \"g.x-labels\").attr(\"role\", Roles.GROUP);\n        var xLabelUpdate = xLabels.selectAll(\"text\").data(this.uniqueKeys);\n        xLabelUpdate.join(function (enter) {\n            return enter\n                .append(\"text\")\n                .text(function (key) { return key; })\n                .attr(\"opacity\", 0)\n                .attr(\"x\", function (key) {\n                return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n            })\n                .attr(\"y\", function (key) {\n                return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n            })\n                .style(\"text-anchor\", function (key) { return radialLabelPlacement(xScale(key)).textAnchor; })\n                .style(\"dominant-baseline\", function (key) {\n                return radialLabelPlacement(xScale(key)).dominantBaseline;\n            })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_x_labels_enter\", animate))\n                    .attr(\"opacity\", 1);\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_x_labels_update\", animate))\n                    .attr(\"opacity\", 1)\n                    .attr(\"x\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n                })\n                    .attr(\"y\", function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_x_labels_exit\", animate))\n                    .attr(\"opacity\", 0)\n                    .remove();\n            });\n        });\n        // blobs\n        var blobs = DOMUtils.appendOrSelect(svg, \"g.blobs\").attr(\"role\", Roles.GROUP);\n        var blobUpdate = blobs\n            .selectAll(\"path\")\n            .data(this.groupedDataNormalized, function (group) { return group.name; });\n        blobUpdate.join(function (enter) {\n            return enter\n                .append(\"path\")\n                .attr(\"class\", \"blob\")\n                .attr(\"role\", Roles.GRAPHICS_SYMBOL)\n                .attr(\"opacity\", 0)\n                .attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\")\n                .attr(\"fill\", function (group) { return colorScale(group.name); })\n                .style(\"fill-opacity\", opacity.selected)\n                .attr(\"stroke\", function (group) { return colorScale(group.name); })\n                .attr(\"d\", function (group) { return oldRadialLineGenerator(group.data); })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_blobs_enter\", animate))\n                    .attr(\"opacity\", 1)\n                    .attr(\"d\", function (group) {\n                    return radialLineGenerator(group.data);\n                });\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_blobs_update\", animate))\n                    .attr(\"opacity\", 1)\n                    .attr(\"transform\", \"translate(\" + c.x + \", \" + c.y + \")\")\n                    .attr(\"d\", function (group) { return radialLineGenerator(group.data); });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition(\"radar_blobs_exit\", animate))\n                    .attr(\"d\", function (group) { return radialLineGenerator(group.data); })\n                    .attr(\"opacity\", 0)\n                    .remove();\n            });\n        });\n        // data dots\n        var dots = DOMUtils.appendOrSelect(svg, \"g.dots\").attr(\"role\", Roles.GROUP);\n        var dotsUpdate = dots\n            .selectAll(\"circle\")\n            .data(this.displayDataNormalized);\n        dotsUpdate\n            .join(function (enter) {\n            return enter.append(\"circle\").attr(\"role\", Roles.GRAPHICS_SYMBOL);\n        }, function (update) { return update; }, function (exit) { return exit.remove(); })\n            .attr(\"class\", function (d) { return Tools.kebabCase(d[angle]); })\n            .attr(\"cx\", function (d) {\n            return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).x;\n        })\n            .attr(\"cy\", function (d) {\n            return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).y;\n        })\n            .attr(\"r\", 0)\n            .attr(\"opacity\", 0)\n            .attr(\"fill\", function (d) { return colorScale(d[groupMapsTo]); });\n        // rectangles\n        var xAxesRect = DOMUtils.appendOrSelect(svg, \"g.x-axes-rect\").attr(\"role\", Roles.GROUP);\n        var xAxisRectUpdate = xAxesRect\n            .selectAll(\"rect\")\n            .data(this.uniqueKeys);\n        xAxisRectUpdate\n            .join(function (enter) {\n            return enter.append(\"rect\").attr(\"role\", Roles.GRAPHICS_SYMBOL);\n        }, function (update) { return update; }, function (exit) { return exit.remove(); })\n            .attr(\"x\", c.x)\n            .attr(\"y\", c.y - xAxisRectHeight / 2)\n            .attr(\"width\", yScale.range()[1])\n            .attr(\"height\", xAxisRectHeight)\n            .attr(\"fill\", \"red\")\n            .style(\"fill-opacity\", 0)\n            .attr(\"transform\", function (key) { return \"rotate(\" + radToDeg(xScale(key)) + \", \" + c.x + \", \" + c.y + \")\"; });\n        var alignment = Tools.getProperty(options, \"radar\", \"alignment\");\n        var alignmentOffset = DOMUtils.getAlignmentOffset(alignment, svg, this.getParent());\n        svg.attr(\"transform\", \"translate(\" + alignmentOffset + \", 0)\");\n        // Add event listeners\n        this.addEventListeners();\n        oldYScale = yScale; // save the current scale as the old one\n    };\n    Radar.prototype.destroy = function () {\n        // Remove event listeners\n        this.parent\n            .selectAll(\".x-axes-rect > rect\")\n            .on(\"mouseover\", null)\n            .on(\"mousemove\", null)\n            .on(\"mouseout\", null);\n        // Remove legend listeners\n        var eventsFragment = this.services.events;\n        eventsFragment.removeEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n        eventsFragment.removeEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n    };\n    Radar.prototype.addEventListeners = function () {\n        var self = this;\n        var _a = Tools.getProperty(this.model.getOptions(), \"radar\"), angle = _a.axes.angle, dotsRadius = _a.dotsRadius;\n        // events on x axes rects\n        this.parent\n            .selectAll(\".x-axes-rect > rect\")\n            .on(\"mouseover\", function (datum) {\n            var hoveredElement = select(this);\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOVER, {\n                element: hoveredElement,\n                datum: datum\n            });\n            var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n            var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum));\n            // Change style\n            axisLine\n                .classed(\"hovered\", true)\n                .attr(\"stroke-dasharray\", \"4 4\");\n            dots.classed(\"hovered\", true)\n                .attr(\"opacity\", 1)\n                .attr(\"r\", dotsRadius);\n            // get the items that should be highlighted\n            var itemsToHighlight = self.displayDataNormalized.filter(function (d) { return d[angle] === datum; });\n            var options = self.model.getOptions();\n            var groupMapsTo = options.data.groupMapsTo;\n            var valueMapsTo = Tools.getProperty(options, \"radar\", \"axes\", \"value\");\n            // Show tooltip\n            self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n                hoveredElement: hoveredElement,\n                items: itemsToHighlight\n                    .filter(function (datum) { return typeof datum[valueMapsTo] === \"number\"; })\n                    .map(function (datum) { return ({\n                    label: datum[groupMapsTo],\n                    value: datum[valueMapsTo],\n                    color: self.model.getStrokeColor(datum[groupMapsTo])\n                }); })\n            });\n        })\n            .on(\"mousemove\", function (datum) {\n            var hoveredElement = select(this);\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEMOVE, {\n                element: hoveredElement,\n                datum: datum\n            });\n            self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n        })\n            .on(\"click\", function (datum) {\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_CLICK, {\n                element: select(this),\n                datum: datum\n            });\n        })\n            .on(\"mouseout\", function (datum) {\n            var hoveredElement = select(this);\n            var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n            var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum));\n            // Change style\n            axisLine\n                .classed(\"hovered\", false)\n                .attr(\"stroke-dasharray\", \"0\");\n            dots.classed(\"hovered\", false).attr(\"opacity\", 0).attr(\"r\", 0);\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOUT, {\n                element: hoveredElement,\n                datum: datum\n            });\n            // Hide tooltip\n            self.services.events.dispatchEvent(Events.Tooltip.HIDE);\n        });\n    };\n    return Radar;\n}(Component));\nexport { Radar };\n//# sourceMappingURL=../../../src/components/graphs/radar.js.map"]},"metadata":{},"sourceType":"module"}